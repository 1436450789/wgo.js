{"version":3,"file":"wgo.js","sources":["../es6/core.js","../es6/Position.js","../es6/Game.js","../es6/kifu/SGFParser.js","../es6/kifu/propertyValueTypes.js","../es6/kifu/KNode.js","../es6/CanvasBoard/helpers.js","../es6/CanvasBoard/CanvasLayer.js","../es6/CanvasBoard/drawHandlers/grid.js","../es6/CanvasBoard/GridLayer.js","../es6/CanvasBoard/ShadowLayer.js","../es6/CanvasBoard/drawHandlers/stoneShadow.js","../es6/CanvasBoard/drawHandlers/glassStone.js","../es6/CanvasBoard/drawHandlers/circle.js","../es6/CanvasBoard/drawHandlers/square.js","../es6/CanvasBoard/drawHandlers/triangle.js","../es6/CanvasBoard/drawHandlers/label.js","../es6/CanvasBoard/drawHandlers/dot.js","../es6/CanvasBoard/drawHandlers/xMark.js","../es6/CanvasBoard/drawHandlers/smileyFace.js","../es6/CanvasBoard/drawHandlers/coordinates.js","../es6/CanvasBoard/defaultTheme.js","../node_modules/lodash/_apply.js","../node_modules/lodash/identity.js","../node_modules/lodash/_overRest.js","../node_modules/lodash/constant.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_defineProperty.js","../node_modules/lodash/_baseSetToString.js","../node_modules/lodash/_shortOut.js","../node_modules/lodash/_setToString.js","../node_modules/lodash/_baseRest.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_stackClear.js","../node_modules/lodash/_stackDelete.js","../node_modules/lodash/_stackGet.js","../node_modules/lodash/_stackHas.js","../node_modules/lodash/_Map.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/_stackSet.js","../node_modules/lodash/_Stack.js","../node_modules/lodash/_baseAssignValue.js","../node_modules/lodash/_assignMergeValue.js","../node_modules/lodash/_createBaseFor.js","../node_modules/lodash/_baseFor.js","../node_modules/lodash/_cloneBuffer.js","../node_modules/lodash/_Uint8Array.js","../node_modules/lodash/_cloneArrayBuffer.js","../node_modules/lodash/_cloneTypedArray.js","../node_modules/lodash/_copyArray.js","../node_modules/lodash/_baseCreate.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_getPrototype.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_initCloneObject.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/isArray.js","../node_modules/lodash/isLength.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/isArrayLikeObject.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/isPlainObject.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/_assignValue.js","../node_modules/lodash/_copyObject.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_nativeKeysIn.js","../node_modules/lodash/_baseKeysIn.js","../node_modules/lodash/keysIn.js","../node_modules/lodash/toPlainObject.js","../node_modules/lodash/_baseMergeDeep.js","../node_modules/lodash/_baseMerge.js","../node_modules/lodash/_customDefaultsMerge.js","../node_modules/lodash/_isIterateeCall.js","../node_modules/lodash/_createAssigner.js","../node_modules/lodash/mergeWith.js","../node_modules/lodash/defaultsDeep.js","../es6/CanvasBoard/index.js","../es6/EventMixin.js","../es6/kifu/Kifu.js","../es6/WGo.js"],"sourcesContent":["// WGo global object with helpers\r\n\r\n/**\r\n * Main namespace - it initializes WGo in first run and then execute main function. \r\n * You must call WGo.init() if you want to use library, without calling WGo.\r\n * @namespace\r\n */\r\n\r\nexport const B = 1;\r\nexport const BLACK = B;\r\nexport const W = -1;\r\nexport const WHITE = W;\r\nexport const E = 0;\r\nexport const EMPTY = E;\r\nexport const ERROR_REPORT = false;\r\n\r\nexport var lang = \"en\";\r\nexport var i18n = {\r\n\ten: {}\r\n}\r\n\r\n// i18n helper\r\nexport function t(str) {\r\n\tvar loc = WGo.i18n[WGo.lang][str] || WGo.i18n.en[str];\r\n\tif(loc) {\r\n\t\tfor(var i = 1; i < arguments.length; i++) {\r\n\t\t\tloc = loc.replace(\"$\", arguments[i]);\r\n\t\t}\r\n\t\treturn loc;\r\n\t}\r\n\treturn str;\r\n};\r\n\r\n/*\r\nif(global[\"document\"]) {\r\n\tvar scripts = document.getElementsByTagName('script');\r\n\tvar path = scripts[scripts.length-1].src.split('?')[0];      // remove any ?query\r\n\tWGo.DIR = path.split('/').slice(0, -1).join('/')+'/';  \r\n}\r\n\r\nif(global[\"navigator\"]) {\r\n\t// browser detection - can be handy\r\n\tWGo.opera = navigator.userAgent.search(/(opera)(?:.*version)?[ \\/]([\\w.]+)/i) != -1;\r\n\tWGo.webkit = navigator.userAgent.search(/(webkit)[ \\/]([\\w.]+)/i) != -1;\r\n\tWGo.msie = navigator.userAgent.search(/(msie) ([\\w.]+)/i) != -1;\r\n\tWGo.mozilla = navigator.userAgent.search(/(mozilla)(?:.*? rv:([\\w.]+))?/i) != -1 && !WGo.webkit && !WGo.msie;\r\n}\r\n*/\r\n\r\n/*// helping function for class inheritance\r\nWGo.extendClass = function(parent, child) {\r\n\tchild.prototype = Object.create(parent.prototype);\r\n\tchild.prototype.constructor = child;\r\n\tchild.prototype.super = parent;\r\n\t\r\n\treturn child;\r\n};\r\n\r\n// helping function for class inheritance\r\nWGo.abstractMethod = function() {\r\n\tthrow Error('unimplemented abstract method');\r\n};\r\n\r\n// helping function for deep cloning of simple objects,\r\nWGo.clone = function(obj) {\r\n\tif(obj && typeof obj == \"object\") {\r\n\t\tvar n_obj = obj.constructor == Array ? [] : {};\r\n\t\t\r\n\t\tfor(var key in obj) {\r\n\t\t\tif(obj[key] == obj) n_obj[key] = obj;\r\n\t\t\telse n_obj[key] = WGo.clone(obj[key]);\r\n\t\t}\r\n\t\t\r\n\t\treturn n_obj;\r\n\t}\r\n\telse return obj;\r\n};\r\n*/\r\n\r\n/**\r\n * Filters html tags from the string to avoid XSS. Characters `<` and `>` are transformed to their entities. \r\n * You can use this function when you display foreign texts.\r\n *\r\n * @param {string} text - text to filter\r\n * @return {string} Filtered text \r\n */\r\n/* \r\nWGo.filterHTML = function(text) {\r\n\tif(!text || typeof text != \"string\") return text;\r\n\treturn text.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n};*/\r\n\r\n//export default WGo;\r\n","/**\r\n * Contains implementation of go position class.\r\n * @module Position\r\n */\r\n\r\nimport {BLACK, EMPTY, WHITE} from \"./core\";\r\n\r\nexport default class Position {\r\n\t/**\r\n\t * Creates instance of position object.\r\n\t *\r\n\t * @alias WGo.Position\r\n\t * @class `WGo.Position` represents a certain position of the go game. It is composed from a grid containing black and white stones, capture counts, and actual turn.\r\n\t *\r\n\t * @param {number} [size = 19] - Size of the board.\r\n\t */\r\n\t \r\n\tconstructor(size) {\r\n\t\t/** \r\n\t\t * Size of the board.\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @constant \r\n\t\t */\r\n\t\t \r\n\t\tthis.size = size || 19;\r\n\t\t\r\n\t\t/** \r\n\t\t * Two dimensional array containing stones of the position.\r\n\t\t *\r\n\t\t * @type {Array.<Array.<(BLACK|WHITE|EMPTY)>>}\r\n\t\t */\r\n\t\t \r\n\t\tthis.grid = [];\r\n\t\tthis.clear();\r\n\t\t\r\n\t\t/** \r\n\t\t * Contains numbers of stones that both players captured.\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t * @property {number} black - Count of white stones captured by **black**.\r\n\t\t * @property {number} white - Count of black stones captured by **white**.\r\n\t\t */\r\n\t\t \r\n\t\tthis.capCount = {\r\n\t\t\tblack: 0,\r\n\t\t\twhite: 0\r\n\t\t}\r\n\t\t\r\n\t\t/** \r\n\t\t * Who plays next move.\r\n\t\t *\r\n\t\t * @type {(BLACK|WHITE)}\r\n\t\t */\r\n\t\t \r\n\t\tthis.turn = BLACK;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns stone on the given field.\r\n\t *\r\n\t * @param {number} x - X coordinate\r\n\t * @param {number} y - Y coordinate\r\n\t * @return {(BLACK|WHITE|EMPTY)} Color\r\n\t */\r\n\r\n\tget(x, y) {\r\n\t\tif(x < 0 || y < 0 || x >= this.size || y >= this.size) return undefined;\r\n\t\treturn this.grid[x*this.size+y];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets stone on the given field.\r\n\t *\r\n\t * @param {number} x - X coordinate\r\n\t * @param {number} y - Y coordinate\r\n\t * @param {(BLACK|WHITE|EMPTY)} c - Color\r\n\t */\r\n\r\n\tset(x, y, c) {\r\n\t\tthis.grid[x*this.size+y] = c;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the whole position (every value is set to EMPTY).\r\n\t */\r\n\r\n\tclear() {\r\n\t\tfor(var i = 0; i < this.size*this.size; i++) this.grid[i] = EMPTY;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Clones the whole position.\r\n\t * \r\n\t * @return {WGo.Position} Copy of the position.\r\n\t * @todo Clone turn as well.\r\n\t */\r\n\r\n\tclone() {\r\n\t\tvar clone = new Position(this.size);\r\n\t\tclone.grid = this.grid.slice(0);\r\n\t\tclone.capCount.black = this.capCount.black;\r\n\t\tclone.capCount.white = this.capCount.white;\r\n\t\tclone.turn = this.turn;\r\n\t\treturn clone;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Compares this position with another position and return object with changes\r\n\t *\r\n\t * @param {WGo.Position} position - Position to compare to.\r\n\t * @return {ChangeObject} Change object\r\n\t */\r\n\t\r\n\tcompare(position) {\r\n\t\tvar add = [], remove = [];\r\n\t\t\r\n\t\tfor(var i = 0; i < this.size*this.size; i++) {\r\n\t\t\tif(this.grid[i] && !position.grid[i]) remove.push({\r\n\t\t\t\tx: Math.floor(i/this.size),\r\n\t\t\t\ty: i%this.size\r\n\t\t\t});\r\n\t\t\telse if(this.grid[i] != position.grid[i]) add.push({\r\n\t\t\t\tx: Math.floor(i/this.size),\r\n\t\t\t\ty: i%this.size,\r\n\t\t\t\tc: position.grid[i]\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tadd: add,\r\n\t\t\tremove: remove\r\n\t\t}\r\n\t}\r\n}\r\n","// Game module\r\n\r\nimport {BLACK, WHITE, EMPTY} from \"./core\";\r\nimport Position from \"./Position\";\r\n\r\n\r\n// Error codes returned by method Game#play()\r\nexport const MOVE_OUT_OF_BOARD = 1;\r\nexport const FIELD_OCCUPIED = 2;\r\nexport const MOVE_SUICIDE = 3;\r\nexport const POSITION_REPEATED = 4;\r\n\r\n// preset rule sets\r\n\r\nexport const JAPANESE_RULES = {\r\n\tcheckRepeat: \"KO\",\r\n\tallowRewrite: false,\r\n\tallowSuicide: false\r\n}\r\n\r\nexport const CHINESE_RULES = {\r\n\tcheckRepeat: \"ALL\",\r\n\tallowRewrite: false,\r\n\tallowSuicide: false\r\n}\r\n\r\nexport const ING_RULES = {\r\n\tcheckRepeat: \"ALL\",\r\n\tallowRewrite: false,\r\n\tallowSuicide: true\r\n}\r\n\r\nexport const NO_RULES = {\r\n\tcheckRepeat: \"NONE\",\r\n\tallowRewrite: true,\r\n\tallowSuicide: true\r\n}\r\n\r\nexport var rules = {\r\n\t\"Japanese\": JAPANESE_RULES,\r\n\t\"GOE\": ING_RULES,\r\n\t\"NZ\": ING_RULES,\r\n\t\"AGA\": CHINESE_RULES,\r\n\t\"Chinese\": CHINESE_RULES\r\n}\r\n\r\nexport const DEFAULT_RULES = \"Japanese\";\r\n\r\n// function for stone capturing\r\nvar capture = function(position, capturedStones, x, y, c) {\r\n\tif(x >= 0 && x < position.size && y >= 0 && y < position.size && position.get(x,y) == c) {\r\n\t\tposition.set(x,y,0);\r\n\t\tcapturedStones.push({x:x, y:y});\r\n\r\n\t\tcapture(position, capturedStones, x, y-1, c);\r\n\t\tcapture(position, capturedStones, x, y+1, c);\r\n\t\tcapture(position, capturedStones, x-1, y, c);\r\n\t\tcapture(position, capturedStones, x+1, y, c);\r\n\t}\r\n}\r\n\r\n// looking at liberties\r\nvar hasLiberties = function(position, alreadyTested, x, y, c) {\r\n\t// out of the board there aren't liberties\r\n\tif(x < 0 || x >= position.size || y < 0 || y >= position.size) return false;\r\n\t\r\n\t// however empty field means liberty\r\n\tif(position.get(x,y) == EMPTY) return true;\r\n\t\r\n\t// already tested field or stone of enemy isn't a liberty.\r\n\tif(alreadyTested.get(x,y) == true || position.get(x,y) == -c) return false;\r\n\t\r\n\t// set this field as tested\r\n\talreadyTested.set(x,y,true);\r\n\t\r\n\t// in this case we are checking our stone, if we get 4 false, it has no liberty\r\n\treturn \thasLiberties(position, alreadyTested, x, y-1, c) ||\r\n\t\t\thasLiberties(position, alreadyTested, x, y+1, c) ||\r\n\t\t\thasLiberties(position, alreadyTested, x-1, y, c) ||\r\n\t\t\thasLiberties(position, alreadyTested, x+1, y, c);\r\n}\r\n\r\n// analysing function - modifies original position, if there are some capturing, and returns array of captured stones\r\nvar captureIfPossible = function(position, x, y, c) {\r\n\tvar capturedStones = [];\r\n\t// is there a stone possible to capture?\r\n\tif(x >= 0 && x < position.size && y >= 0 && y < position.size && position.get(x,y) == c) {\r\n\t\t// create testing map\r\n\t\tvar alreadyTested = new Position(position.size);\r\n\t\t// if it has zero liberties capture it\r\n\t\tif(!hasLiberties(position, alreadyTested, x, y, c)) {\r\n\t\t\t// capture stones from game\r\n\t\t\tcapture(position, capturedStones, x, y, c);\r\n\t\t}\r\n\t}\r\n\treturn capturedStones;\r\n}\r\n\r\n// analysing history\r\nvar checkHistory = function(position, x, y) {\r\n\tvar flag, stop; \r\n\t\r\n\tif(this.repeating == \"KO\" && this.stack.length-2 >= 0) stop = this.stack.length-2;\r\n\telse if(this.repeating == \"ALL\") stop = 0;\r\n\telse return true;\r\n\t\r\n\tfor(var i = this.stack.length-2; i >= stop; i--) {\r\n\t\tif(this.stack[i].get(x,y) == position.get(x,y)) {\r\n\t\t\tflag = true;\r\n\t\t\tfor(var j = 0; j < this.size*this.size; j++) {\r\n\t\t\t\tif(this.stack[i].grid[j] != position.grid[j]) {\r\n\t\t\t\t\tflag = false; \r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(flag) return false;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n\r\nexport default class Game {\r\n\t\r\n\t/**\r\n\t * Creates instance of game class.\r\n\t * \r\n\t * @class\r\n\t * This class implements game logic. It basically analyses given moves and returns capture stones. \r\n\t * WGo.Game also stores every position from beginning, so it has ability to check repeating positions\r\n\t * and it can effectively restore old positions.\r\n\t *\r\n\t *\r\n\t * @param {number} [size = 19] Size of the board\r\n\t * @param {string} [checkRepeat = KO] How to handle repeated position:\r\n\t *\r\n\t * * KO - ko is properly handled - position cannot be same like previous position\r\n\t * * ALL - position cannot be same like any previous position - e.g. it forbids triple ko\r\n\t * * NONE - position can be repeated\r\n\t *\r\n\t * @param {boolean} [allowRewrite = false] Allow to play moves, which were already played\r\n\t * @param {boolean} [allowSuicide = false] Allow to play suicides, stones are immediately captured\r\n\t */\r\n \r\n\tconstructor(size, rulesOrCheckRepeat = JAPANESE_RULES, allowRewrite, allowSuicide) {\r\n\t\tthis.size = size || 19;\r\n\t\tthis.setRules(rulesOrCheckRepeat, allowRewrite, allowSuicide);\r\n\t\tthis.stack = [new Position(this.size)];\t\t\t  \r\n\t}\r\n\t\r\n\tget position() {\r\n\t\treturn this.stack[this.stack.length-1];\r\n\t}\r\n\t\r\n\tset position(pos) {\r\n\t\tthis.stack[this.stack.length-1] = pos; \r\n\t}\r\n\t\r\n\tget turn() {\r\n\t\treturn this.stack[this.stack.length-1].turn;\r\n\t}\r\n\t\r\n\tset turn(turn) {\r\n\t\tthis.stack[this.stack.length-1].turn = turn; \r\n\t}\r\n\t\r\n\t/**\r\n\t * Play move. \r\n\t *\r\n\t * @param {number} x coordinate\r\n\t * @param {number} y coordinate\r\n\t * @param {(BLACK|WHITE)} c color\r\n\t * @param {boolean} noplay - if true, move isn't played. Used by WGo.Game.isValid.\r\n\t * @return {number} code of error, if move isn't valid. If it is valid, function returns array of captured stones.\r\n\t * \r\n\t * Error codes: \r\n\t * 1 - given coordinates are not on board\r\n\t * 2 - on given coordinates already is a stone\r\n\t * 3 - suicide (currently they are forbbiden)\r\n\t * 4 - repeated position\r\n\t */\r\n\t\r\n\tplay(x, y, c, noplay) {\r\n\t\t//check coordinates validity\r\n\t\tif(!this.isOnBoard(x,y)) return MOVE_OUT_OF_BOARD;\r\n\t\tif(!this.allowRewrite && this.position.get(x,y) != 0) return FIELD_OCCUPIED;\r\n\t\t\r\n\t\t// clone position\r\n\t\tvar c = c || this.position.turn; \r\n\t\t\r\n\t\tvar newPosition = this.position.clone();\t\r\n\t\tnewPosition.set(x,y,c);\r\n\t\t\r\n\t\t// check capturing\r\n\t\tvar capturesColor = c;\r\n\t\tvar capturedStones = captureIfPossible(newPosition, x-1, y, -c).concat(captureIfPossible(newPosition, x+1, y, -c), captureIfPossible(newPosition, x, y-1, -c), captureIfPossible(newPosition, x, y+1, -c));\r\n\t\t\r\n\t\t// check suicide\r\n\t\tif(!capturedStones.length) {\r\n\t\t\tvar testing = new Position(this.size);\r\n\t\t\tif(!hasLiberties(newPosition, testing, x, y, c)) {\r\n\t\t\t\tif(this.allowSuicide) {\r\n\t\t\t\t\tcapturesColor = -c;\r\n\t\t\t\t\tcapture(newPosition, capturedStones, x, y, c);\r\n\t\t\t\t}\r\n\t\t\t\telse return MOVE_SUICIDE;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// check history\r\n\t\tif(this.repeating && !checkHistory.call(this, newPosition, x, y)) {\r\n\t\t\treturn POSITION_REPEATED;\r\n\t\t}\r\n\t\t\r\n\t\tif(noplay) return false;\r\n\t\t\r\n\t\t// reverse turn\r\n\t\tnewPosition.turn = -c;\r\n\t\t\r\n\t\t// update position info\r\n\t\tif(capturesColor == BLACK) newPosition.capCount.black += capturedStones.length;\r\n\t\telse newPosition.capCount.white += capturedStones.length;\r\n\t\t\r\n\t\t// save position\r\n\t\tthis.pushPosition(newPosition);\r\n\t\t\r\n\t\treturn capturedStones;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Play pass.\r\n\t *\r\n\t * @param {(BLACK|WHITE)} c color\r\n\t */\r\n\t\r\n\tpass(c) {\r\n\t\tvar c = c || this.position.turn; \r\n\t\t\r\n\t\tthis.pushPosition();\r\n\t\tthis.position.turn = -c;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Finds out validity of the move. \r\n\t *\r\n\t * @param {number} x coordinate\r\n\t * @param {number} y coordinate\r\n\t * @param {(BLACK|WHITE)} c color\r\n\t * @return {boolean} true if move can be played.\r\n\t */\r\n\t\r\n\tisValid(x, y, c) {\r\n\t\treturn typeof this.play(x, y, c, true) != \"number\";\r\n\t}\r\n\t\r\n\t/**\r\n\t * Controls position of the move. \r\n\t *\r\n\t * @param {number} x coordinate\r\n\t * @param {number} y coordinate\r\n\t * @return {boolean} true if move is on board.\r\n\t */\r\n\t\r\n\tisOnBoard(x, y) {\r\n\t\treturn x >= 0 && y >= 0 && x < this.size && y < this.size;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Inserts move into current position. Use for setting position, for example in handicap game. Field must be empty.\r\n\t *\r\n\t * @param {number} x coordinate\r\n\t * @param {number} y coordinate\r\n\t * @param {(BLACK|WHITE|EMPTY)} c color\r\n\t * @return {boolean} true if operation is successfull.\r\n\t */\r\n\t\r\n\taddStone(x, y, c) {\r\n\t\tif(this.isOnBoard(x, y) && this.position.get(x, y) == EMPTY) {\r\n\t\t\tthis.position.set(x, y, c || EMPTY);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes move from current position. \r\n\t *\r\n\t * @param {number} x coordinate\r\n\t * @param {number} y coordinate\r\n\t * @return {boolean} true if operation is successfull.\r\n\t */\r\n\t\r\n\tremoveStone(x, y) {\r\n\t\tif(this.isOnBoard(x, y) && this.position.get(x, y) != EMPTY) {\r\n\t\t\tthis.position.set(x, y, EMPTY);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set or insert move of current position.\r\n\t *\r\n\t * @param {number} x coordinate\r\n\t * @param {number} y coordinate\r\n\t * @param {(BLACK|WHITE)} [c] color\r\n\t * @return {boolean} true if operation is successfull.\r\n\t */\r\n\t\r\n\tsetStone(x, y, c) {\r\n\t\tif(this.isOnBoard(x,y)) {\r\n\t\t\tthis.position.set(x, y, c || EMPTY);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get stone on given position.\r\n\t *\r\n\t * @param {number} x coordinate\r\n\t * @param {number} y coordinate\r\n\t * @return {(BLACK|WHITE|EMPTY|null)} color\r\n\t */\r\n\t\r\n\tgetStone(x, y) {\r\n\t\tif(this.isOnBoard(x, y)) {\r\n\t\t\treturn this.position.get(x, y);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Add position to stack. If position isn't specified current position is cloned and stacked.\r\n\t * Pointer of actual position is moved to the new position.\r\n\t *\r\n\t * @param {WGo.Position} tmp position (optional)\r\n\t */\r\n\t\r\n\tpushPosition(pos) {\r\n\t\tvar pos = pos || this.position.clone();\r\n\t\tthis.stack.push(pos);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Remove current position from stack. Pointer of actual position is moved to the previous position.\r\n\t */\r\n\t\r\n\tpopPosition() {\r\n\t\tvar old;\r\n\t\tif(this.stack.length > 0) old = this.stack.pop();\r\n\t\treturn old;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes all positions.\r\n\t */\r\n\t\r\n\tfirstPosition() {\r\n\t\tthis.stack = [];\r\n\t\tthis.pushPosition(new Position(this.size));\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets count of captured stones.\r\n\t *\r\n\t * @param {(BLACK|WHITE)} color\r\n\t * @return {number} count\r\n\t */\r\n\t\r\n\tgetCaptureCount(color) {\r\n\t\treturn color == BLACK ? this.position.capCount.black : this.position.capCount.white;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Validate postion. Position is tested from 0:0 to size:size, if there are some moves, that should be captured, they will be removed.\r\n\t * You can use this, after insertion of more stones.\r\n\t *\r\n\t * @return {Array} removed stones\r\n\t */\r\n\t \r\n\tvalidatePosition() {\r\n\t\tvar c, p,\r\n\t\t    white = 0, \r\n\t\t\tblack = 0,\r\n\t\t    capturedStones = [],\r\n\t\t    newPosition = this.position.clone();\r\n\t\t\r\n\t\tfor(var x = 0; x < this.size; x++) {\r\n\t\t\tfor(var y = 0; y < this.size; y++) {\r\n\t\t\t\tc = this.position.get(x,y);\r\n\t\t\t\tif(c) {\r\n\t\t\t\t\tp = capturedStones.length;\r\n\t\t\t\t\tcapturedStones = capturedStones.concat(captureIfPossible(newPosition, x-1, y, -c), captureIfPossible(newPosition, x+1, y, -c), captureIfPossible(newPosition, x, y-1, -c), captureIfPossible(newPosition, x, y+1, -c));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tif(c == BLACK) black += capturedStones.length-p;\r\n\t\t\t\t\telse white += capturedStones.length-p;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.position.capCount.black += black;\r\n\t\tthis.position.capCount.white += white;\r\n\t\tthis.position.grid = newPosition.grid;\r\n\t\t\r\n\t\treturn capturedStones;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets go rules for this game. You should use it only in the special cases. \r\n\t * If you change rules in the middle of the game, you can get unintentional outcome.\r\n\t * \r\n\t * @param {(object|string)} rulesOrCheckRepeat      rules object or repeat flag (one of \"KO\", \"ALL\" or \"NONE\")\r\n\t * @param {boolean}         [allowRewrite = false]  allow rewrite flag\r\n\t * @param {boolean}         [allowSuicide = false]  allow suicide\r\n\t */\r\n\tsetRules(rulesOrCheckRepeat, allowRewrite, allowSuicide) {\r\n\t\tif(typeof rulesOrCheckRepeat == \"object\") {\r\n\t\t\tallowRewrite = rulesOrCheckRepeat.allowRewrite;\r\n\t\t\tallowSuicide = rulesOrCheckRepeat.allowSuicide;\r\n\t\t\trulesOrCheckRepeat = rulesOrCheckRepeat.checkRepeat;\r\n\t\t}\r\n\t\t\r\n\t\tthis.repeating = rulesOrCheckRepeat == null ? \"KO\" : rulesOrCheckRepeat; // possible values: KO, ALL or nothing\r\n\t\tthis.allowRewrite = allowRewrite || false;\r\n\t\tthis.allowSuicide = allowSuicide || false;\t\t  \r\n\t}\r\n}\r\n","/**\r\n * Contains methods for parsing sgf string\r\n * @module SGFParser\r\n */\r\n\r\nconst CODE_A = \"A\".charCodeAt(0);\r\nconst CODE_Z = \"Z\".charCodeAt(0);\r\nconst CODE_WHITE = \" \".charCodeAt(0);\r\n\r\n/**\r\n * Class for parsing of sgf files. Can be used for parsing of SGF fragments as well.\r\n */\r\n \r\nexport default class SGFParser {\r\n\r\n\t/**\r\n\t * Class constructor.\r\n\t * @param {string} sgf string to parse.\r\n\t */\r\n\tconstructor(sgf) {\r\n\t\t/** \r\n\t\t * Parsed SGF string \r\n\t\t * @type {string} \r\n\t\t */\r\n\t\tthis.sgfString = sgf;\r\n\t\t\r\n\t\t/**\r\n\t\t * Current character position \r\n\t\t * @type {number} \r\n\t\t */\r\n\t\tthis.position = 0;\r\n\t\t\r\n\t\t/** \r\n\t\t * Current character\r\n\t\t * @type {string} \r\n\t\t */\r\n\t\tthis.currentChar = sgf[0];\r\n\t\t\r\n\t\t/** \r\n\t\t * Current char number (on the line) \r\n\t\t * @type {number}\r\n\t\t */\r\n\t\tthis.lineNo = 1;\r\n\t\t\t\r\n\t\t/** \r\n\t\t * Current char number (on the line) \r\n\t\t * @type {number}\r\n\t\t */\r\n\t\tthis.charNo = 0;\r\n\t}\r\n\t\r\n\tnext(dontSkipWhite) {\r\n\t\tif(!dontSkipWhite) {\r\n\t\t\twhile(this.sgfString.charCodeAt(++this.position) <= CODE_WHITE) {\r\n\t\t\t\tif(this.sgfString[this.position] == \"\\n\") {\r\n\t\t\t\t\tthis.charNo = 0;\r\n\t\t\t\t\tthis.lineNo++;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.charNo++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.charNo++;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.position++;\r\n\t\t\tif(this.sgfString[this.position] == \"\\n\") {\r\n\t\t\t\tthis.charNo = 0;\r\n\t\t\t\tthis.lineNo++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.charNo++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn this.currentChar = this.sgfString[this.position];\r\n\t}\r\n\t\r\n\t\r\n\tparsePropertyValue() {\r\n\t\tvar value = \"\";\r\n\t\t\r\n\t\t// then we read the value\r\n\t\twhile(this.next(true) != ']') {\r\n\r\n\t\t\t// char mustn't be undefined\r\n\t\t\tif(!this.currentChar) throw new SGFSyntaxError(\"End of SGF inside of property\", this);\r\n\r\n\t\t\t// if there is character '\\' save next character\r\n\t\t\telse if(this.currentChar == '\\\\') {\r\n\t\t\t\tthis.next(true);\r\n\r\n\t\t\t\t// char have to exis of course\r\n\t\t\t\tif(!this.currentChar) throw new SGFSyntaxError(\"End of SGF inside of property\", this);\r\n\r\n\t\t\t\t// ignore new line, otherwise save\r\n\t\t\t\telse if(this.currentChar == '\\n') {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// save the character\r\n\t\t\tvalue += this.currentChar;\r\n\t\t}\r\n\t\t\r\n\t\treturn value;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Expects string containing value(-s) of SGF property and returns array of that values.\r\n\t * Example: `'[jj][kk]' => ['jj', 'kk']`.\r\n\t * \r\n\t * @param {string}   string - parsed SGF\r\n \t * @param {number}   start  - starting position\r\n \t * @returns {string[]} array of property values                       \r\n \t * @throws {SGFSyntaxError} When sgf string is invalid.\r\n\t */\r\n\t \r\n\tparsePropertyValues() {\r\n\t\tvar values = [];\r\n\t\t\r\n\t\tif(this.currentChar != '[') throw new SGFSyntaxError(\"Property must have at least one value enclosed in '[' and ']'\", this);\r\n\t\t\r\n\t\tdo {\r\n\t\t\tlet value = this.parsePropertyValue();\r\n\t\t\tif(value != \"\") values.push(value);\r\n\t\t} while(this.next() == '[');\r\n\r\n\t\treturn values;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Reads the property identificator (One or more UC letters)\r\n\t * \r\n\t * @returns {string} the identificator.\r\n\t */\r\n\tparsePropertyIdent() {\r\n\t\tvar ident = \"\", charCode = this.sgfString.charCodeAt(this.position);\r\n\t\twhile(charCode >= CODE_A && charCode <= CODE_Z) {\r\n\t\t\tident += this.currentChar;\r\n\t\t\tthis.next();\r\n\t\t\tcharCode = this.sgfString.charCodeAt(this.position);\r\n\t\t}\r\n\t\treturn ident;\r\n\t}\r\n\t\r\n\tparseProperties() {\r\n\t\tvar ident, properties = {};\r\n\t\twhile(ident = this.parsePropertyIdent()) {\r\n\t\t\tproperties[ident] = this.parsePropertyValues();\r\n\t\t}\r\n\t\treturn properties;\r\n\t}\r\n\t\r\n\tparseNode() {\r\n\t\t// in this point I know, that current character is ';' (don't have to check it)\r\n\t\tthis.next();\r\n\t\t\r\n\t\treturn this.parseProperties();\r\n\t}\r\n\t\r\n\tparseSequence() {\r\n\t\tvar sequence = [];\r\n\r\n\t\t// sequence must start with `;`\r\n\t\tif(this.currentChar != ';') throw new SGFSyntaxError(\"There must be at least one SGF node in sequence\", this);\r\n\t\t\r\n\t\tdo {\r\n\t\t\tsequence.push(this.parseNode());\r\n\t\t} while(this.currentChar == ';');\r\n\t\t\r\n\t\treturn sequence;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Parses a SGF *GameTree*.\r\n\t * \r\n\t * @throws {SGFSyntaxError} [[Description]]\r\n\t * @returns {[[Type]]} [[Description]]\r\n\t */\r\n\tparseGameTree() {\r\n\t\t// No need to check GameTree (we know it starts with `(`)\r\n\t\tthis.next();\r\n\t\t\r\n\t\t// Parse sequence\r\n\t\tvar sequence = this.parseSequence();\r\n\t\t\r\n\t\t// Game tree ends with `)`, or add subtree to the end of sequence\r\n\t\tif(this.currentChar != ')') sequence.push(this.parseCollection());\r\n\t\r\n\t\treturn sequence;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Parses a SGF *Collection*.\r\n\t */\r\n\tparseCollection() {\r\n\t\tvar gameTrees = [];\r\n\t\t\r\n\t\t// Parse all trees\r\n\t\tdo {\r\n\t\t\t// Collection must start with character `(`\r\n\t\t\tif(this.currentChar != '(') throw new SGFSyntaxError(\"SGF tree must be enclosed in '(' and ')'\", this);\r\n\t\t\tgameTrees.push(this.parseGameTree());\r\n\t\t\tthis.next();\r\n\t\t} while(this.currentChar && this.currentChar != ')');\r\n\t\t\r\n\t\treturn gameTrees;\r\n\t}\r\n}\r\n\r\n/**\r\n * Class for syntax errors in SGF string.\r\n * @extends Error\r\n */\r\nexport class SGFSyntaxError {\r\n\tconstructor(message, parser) {\r\n\t\tvar tempError = Error.apply(this);\r\n\t\ttempError.name = this.name = 'SGFSyntaxError';\r\n\t\tthis.message = message || 'There was an unspecified syntax error in the SGF';\r\n\t\t\r\n\t\tif(parser) {\r\n\t\t\tthis.message += \" on line \"+parser.lineNo+\", char \"+parser.charNo+\":\\n\";\r\n\t\t\tthis.message += \"\\t\"+parser.sgfString.split(\"\\n\")[parser.lineNo-1]+\"\\n\";\r\n\t\t\tthis.message += \"\\t\"+Array(parser.charNo+1).join(\" \")+\"^\";\r\n\t\t}\r\n\t\t\r\n\t\tthis.stack = tempError.stack;\r\n\t}\r\n}\r\n\r\n// a small ES5 hack because currently in ES6 you can't extend Errors\r\nSGFSyntaxError.prototype = Object.create(Error.prototype);\r\nSGFSyntaxError.prototype.constructor = SGFSyntaxError;\r\n","/**\r\n * From SGF specification, there are these types of property values:\r\n * \r\n * CValueType = (ValueType | *Compose*)\r\n * ValueType  = (*None* | *Number* | *Real* | *Double* | *Color* | *SimpleText* | *Text* | *Point*  | *Move* | *Stone*)\r\n * \r\n * WGo's kifu node (KNode object) implements similar types with few exceptions: \r\n * \r\n * - Types `Number`, `Real` and `Double` are implemented by javascript's `number`.\r\n * - Types `SimpleText` and `Text` are considered as the same.\r\n * - Types `Point`, `Move` and `Stone` are all the same, implemented as simple object with `x` and `y` coordinates.\r\n * - Type `None` is implemented as `true`\r\n * \r\n * Each `Compose` type, which is used in SGF, has its own type.\r\n * \r\n * - `Point ':' Point` (used in AR property) has special type `Line` - object with two sets of coordinates.\r\n * - `Point ':' Simpletext` (used in LB property) has special type `Label` - object with coordinates and text property\r\n * - `Simpletext \":\" Simpletext` (used in AP property) - not implemented\r\n * - `Number \":\" SimpleText` (used in FG property) - not implemented\r\n * \r\n * Moreover each property value has these settings:\r\n * \r\n * - *Single value* / *Array* (more values)\r\n * - *Not empty* / *Empty* (value or array can be empty)\r\n * \r\n * {@link http://www.red-bean.com/sgf/sgf4.html}\r\n */\r\n\r\nimport {BLACK, WHITE, EMPTY} from \"../core\";\r\n\r\n/// Types definitions -----------------------------------------------------------------------------\r\n\r\nexport const NONE = {\r\n\tread: str => true,\r\n\twrite: value => \"\"\r\n}\r\n\r\nexport const NUMBER = {\r\n\tread: str => parseFloat(str),\r\n\twrite: value => value+\"\"\r\n}\r\n\r\nexport const TEXT = {\r\n\tread: str => str,\r\n\twrite: value => value\r\n}\r\n\r\nexport const COLOR = {\r\n\tread: str => (str == \"w\" || str == \"W\" ? WHITE : BLACK),\r\n\twrite: value => (value == WHITE ? \"W\" : \"B\")\r\n}\r\n\r\nexport const POINT = {\r\n\tread: str => str ? {\r\n\t\tx: str.charCodeAt(0)-97,\r\n\t\ty: str.charCodeAt(1)-97\r\n\t} : false,\r\n\twrite: value => value ? String.fromCharCode(value.x+97) + String.fromCharCode(value.y+97) : \"\"\r\n}\r\n\r\nexport const LABEL = {\r\n\tread: str => ({\r\n\t\tx: str.charCodeAt(0)-97,\r\n\t\ty: str.charCodeAt(1)-97,\r\n\t\ttext: str.substr(3)\r\n\t}),\r\n\twrite: value => String.fromCharCode(value.x+97) + String.fromCharCode(value.y+97) + \":\" + value.text\r\n}\r\n\r\nexport const LINE = {\r\n\tread: str => ({\r\n\t\tx1: str.charCodeAt(0)-97,\r\n\t\ty1: str.charCodeAt(1)-97,\r\n\t\tx2: str.charCodeAt(3)-97,\r\n\t\ty2: str.charCodeAt(4)-97\r\n\t}),\r\n\twrite: value => String.fromCharCode(value.x1+97) + String.fromCharCode(value.y1+97) + \":\" + String.fromCharCode(value.x2+97) + String.fromCharCode(value.y2+97)\r\n}\r\n\r\n/// Property definitions --------------------------------------------------------------------------\r\n\r\nvar propertyValueTypes = {\r\n\t_default: {\r\n\t\ttype: TEXT,\r\n\t\tmultiple: false,\r\n\t\tnotEmpty: true\r\n\t}\r\n}\r\n\r\n/// Move properties -------------------------------------------------------------------------------\r\n\r\npropertyValueTypes.B = propertyValueTypes.W = {\r\n\ttype: POINT,\r\n\tmultiple: false,\r\n\tnotEmpty: false\r\n}\r\n\r\npropertyValueTypes.KO = {\r\n\ttype: NONE,\r\n\tmultiple: false,\r\n\tnotEmpty: false\r\n}\r\n\r\npropertyValueTypes.MN = {\r\n\ttype: NUMBER,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\n/// Setup properties ------------------------------------------------------------------------------\r\n\r\npropertyValueTypes.AB = propertyValueTypes.AW = propertyValueTypes.AE = {\r\n\ttype: POINT,\r\n\tmultiple: true,\r\n\tnotEmpty: true\r\n}\r\n\r\npropertyValueTypes.PL= {\r\n\ttype: COLOR,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\nexport var setupProperties = {\r\n\t\"AB\": BLACK, \r\n\t\"AW\": WHITE, \r\n\t\"AE\": EMPTY\r\n};\r\n\r\n/// Node annotation properties --------------------------------------------------------------------\r\n\r\npropertyValueTypes.C = propertyValueTypes.N = {\r\n\ttype: TEXT,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\npropertyValueTypes.DM = propertyValueTypes.GB = propertyValueTypes.GW = \r\npropertyValueTypes.HO = propertyValueTypes.UC = propertyValueTypes.V = {\r\n\ttype: NUMBER,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\n/// Move annotation properties --------------------------------------------------------------------\r\n\r\npropertyValueTypes.BM = propertyValueTypes.TE = {\r\n\ttype: NUMBER,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\npropertyValueTypes.DO = propertyValueTypes.IT = {\r\n\ttype: NONE,\r\n\tmultiple: false,\r\n\tnotEmpty: false\r\n}\r\n\r\n/// Markup properties -----------------------------------------------------------------------------\r\n\r\npropertyValueTypes.CR = propertyValueTypes.MA = propertyValueTypes.SL = propertyValueTypes.SQ = propertyValueTypes.TR = {\r\n\ttype: POINT,\r\n\tmultiple: true,\r\n\tnotEmpty: true\r\n}\r\n\r\npropertyValueTypes.LB = {\r\n\ttype: LABEL,\r\n\tmultiple: true,\r\n\tnotEmpty: true\r\n}\r\n\r\npropertyValueTypes.AR = propertyValueTypes.LN = {\r\n\ttype: LINE,\r\n\tmultiple: true,\r\n\tnotEmpty: true\r\n}\r\n\r\npropertyValueTypes.DD = propertyValueTypes.TB = propertyValueTypes.TW = {\r\n\ttype: POINT,\r\n\tmultiple: true,\r\n\tnotEmpty: false\r\n}\r\n\r\nexport var markupProperties = [\"CR\", \"MA\", \"SL\", \"SQ\", \"TR\", \"LB\"];\r\n\r\n/// Root properties -------------------------------------------------------------------------------\r\n\r\npropertyValueTypes.AP = propertyValueTypes.CA = {\r\n\ttype: TEXT,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\n// note: rectangular board is not implemented (in SZ property)\r\npropertyValueTypes.FF = propertyValueTypes.GM = propertyValueTypes.ST = propertyValueTypes.SZ = {\r\n\ttype: NUMBER,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\n/// Game info properties --------------------------------------------------------------------------\r\n\r\npropertyValueTypes.AN = propertyValueTypes.BR = propertyValueTypes.BT = \r\npropertyValueTypes.CP = propertyValueTypes.DT = propertyValueTypes.EV = \r\npropertyValueTypes.GN = propertyValueTypes.GC = propertyValueTypes.GN = \r\npropertyValueTypes.ON = propertyValueTypes.OT = propertyValueTypes.PB = \r\npropertyValueTypes.PC = propertyValueTypes.PW = propertyValueTypes.RE = \r\npropertyValueTypes.RO = propertyValueTypes.RU = propertyValueTypes.SO = \r\npropertyValueTypes.US = propertyValueTypes.WR = propertyValueTypes.WT = {\r\n\ttype: TEXT,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\npropertyValueTypes.TM = propertyValueTypes.HA = propertyValueTypes.KM = {\r\n\ttype: NUMBER,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\n/// Timing properties -----------------------------------------------------------------------------\r\n\r\npropertyValueTypes.BL = propertyValueTypes.WL = propertyValueTypes.OB = propertyValueTypes.OW = {\r\n\ttype: NUMBER,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\n/// Miscellaneous properties ----------------------------------------------------------------------\r\n\r\npropertyValueTypes.PM = {\r\n\ttype: NUMBER,\r\n\tmultiple: false,\r\n\tnotEmpty: true\r\n}\r\n\r\npropertyValueTypes.VW = {\r\n\ttype: POINT,\r\n\tmultiple: true,\r\n\tnotEmpty: false\r\n}\r\n\r\nexport default propertyValueTypes;\r\n","import SGFParser, {SGFSyntaxError} from \"./SGFParser\";\r\nimport propertyValueTypes from \"./propertyValueTypes\";\r\n\r\n// jsgf helper\r\nvar processJsgf = function(parent, jsgf, pos) {\r\n\tif(jsgf[pos]) {\r\n\t\tif(jsgf[pos].constructor == Array) {\r\n\t\t\t// more children (fork)\r\n\t\t\tjsgf[pos].forEach(function(jsgf2) {\r\n\t\t\t\tprocessJsgf(parent, jsgf2, 0);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// one child\r\n\t\t\tvar node = new KNode();\r\n\t\t\tnode.setSGFProperties(jsgf[pos]);\r\n\t\t\tparent.appendChild(node);\r\n\t\t\tprocessJsgf(node, jsgf, pos+1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Class representing one kifu node.\r\n */\r\nexport default class KNode {\r\n\r\n\tstatic fromJS(jsgf) {\r\n\t\tvar root = new KNode();\r\n\r\n\t\troot.setSGFProperties(jsgf[0]);\r\n\t\tprocessJsgf(root, jsgf, 1);\r\n\r\n\t\treturn root;\r\n\t}\r\n\t\r\n\tstatic fromSGF(sgf, ind) {\r\n\t\tvar parser = new SGFParser(sgf);\r\n\t\treturn KNode.fromJS(parser.parseCollection()[ind || 0]);\r\n\t}\r\n\t\r\n\tconstructor() {\r\n\t\t// parent node (readonly) \r\n\t\tthis.parent = null; \r\n\r\n\t\t// array of child nodes (readonly)\r\n\t\tthis.children = [];\r\n\r\n\t\t// map of SGF properties (readonly) - {<PropIdent>: Array<PropValue>}\r\n\t\tthis.SGFProperties = {};\r\n\t}\r\n\t\r\n\tget root() {\r\n\t\tvar node = this;\r\n\t\twhile(node.parent != null) node = node.parent;\r\n\t\treturn node;\r\n\t}\r\n\t\r\n\tset innerSGF(sgf) {\r\n\t\t// prepare parser\r\n\t\tthis.setFromSGF(new SGFParser(sgf));\r\n\t}\r\n\r\n\tget innerSGF() {\r\n\t\tvar output = \"\";\r\n\t\t\r\n\t\tfor(let propIdent in this.SGFProperties) {\r\n\t\t\tif(this.SGFProperties.hasOwnProperty(propIdent)) {\r\n\t\t\t\toutput += propIdent+this.getSGFProperty(propIdent);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.children.length == 1) {\r\n\t\t\treturn output+\";\"+this.children[0].innerSGF;\r\n\t\t}\r\n\t\telse if(this.children.length > 1) {\r\n\t\t\treturn this.children.reduce((prev, current) => prev+\"(;\"+current.innerSGF+\")\", output);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn output;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/// GENERAL TREE NODE MANIPULATION METHODS (subset of DOM API's Node)\r\n\t\r\n\t/**\r\n\t * Insert a KNode as the last child node of this node.\r\n\t * \r\n\t * @throws  {Error} when argument is invalid.\r\n\t * @param   {KNode} node to append.\r\n\t * @returns {number} position(index) of appended node.\r\n\t */\r\n\t\r\n\tappendChild(node) {\r\n\t\tif(node == null || !(node instanceof KNode) || node == this) throw new Error(\"Invalid argument passed to `appendChild` method, KNode was expected.\");\r\n\t\t\r\n\t\tif(node.parent) node.parent.removeChild(node);\r\n\t\t\r\n\t\tnode.parent = this;\r\n\t\t\r\n\t\treturn this.children.push(node)-1;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Hard clones a KNode and all of its contents.\r\n\t * \r\n\t * @param {boolean}\tappendToParent if set true, cloned node will be appended to this parent.\r\n\t * @returns {KNode}\tcloned node                              \r\n\t */\r\n\t \r\n\tcloneNode(appendToParent) {\r\n\t\tvar node = new KNode();\r\n\t\tnode.innerSGF = this.innerSGF;\r\n\t\t\r\n\t\tif(appendToParent && this.parent) this.parent.appendChild(node);\r\n\t\t\r\n\t\treturn node;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns a Boolean value indicating whether a node is a descendant of a given node or not.\r\n\t * \r\n\t * @param   {KNode}   node to be tested\r\n\t * @returns {boolean} true, if this node contains given node.\r\n\t */\r\n\t\r\n\tcontains(node) {\r\n\t\tif(this.children.indexOf(node) >= 0) return true;\r\n\t\t\r\n\t\treturn this.children.some(child => child.contains(node));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Inserts the first KNode given in a parameter immediately before the second, child of this KNode.\r\n\t * \r\n\t * @throws  {Error}   when argument is invalid.\r\n\t * @param   {KNode}   newNode       node to be inserted\r\n\t * @param   {(KNode)} referenceNode reference node, if omitted, new node will be inserted at the end. \r\n\t * @returns {KNode}   this node\r\n\t */\r\n\t\r\n\tinsertBefore(newNode, referenceNode) {\r\n\t\tif(newNode == null || !(newNode instanceof KNode) || newNode == this) throw new Error(\"Invalid argument passed to `insertBefore` method, KNode was expected.\");\r\n\t\telse if(referenceNode == null) return this.appendChild(newNode);\r\n\t\t\r\n\t\tif(newNode.parent) newNode.parent.removeChild(newNode);\r\n\t\t\r\n\t\tnewNode.parent = this;\r\n\t\t\r\n\t\tthis.children.splice(this.children.indexOf(referenceNode), 0, newNode);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes a child node from the current element, which must be a child of the current node.\r\n\t * \r\n\t * @param   {object} child node to be removed\r\n\t * @returns {KNode}  this node\r\n\t */\r\n\t\r\n\tremoveChild(child) {\r\n\t\tthis.children.splice(this.children.indexOf(child), 1);\r\n\r\n\t\tchild.parent = null;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Replaces one child Node of the current one with the second one given in parameter.\r\n\t * \r\n\t * @throws  {Error} when argument is invalid\r\n\t * @param   {KNode} newChild node to be inserted\r\n\t * @param   {KNode} oldChild node to be replaced\r\n\t * @returns {KNode} this node\r\n\t */\r\n\t\r\n\treplaceChild(newChild, oldChild) {\r\n\t\tif(newChild == null || !(newChild instanceof KNode) || newChild == this) throw new Error(\"Invalid argument passed to `replaceChild` method, KNode was expected.\");\r\n\t\t\r\n\t\tthis.insertBefore(newChild, oldChild);\r\n\t\tthis.removeChild(oldChild);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/// BASIC PROPERTY GETTER and SETTER\r\n\t\r\n\t/**\r\n\t * Gets property by SGF property identificator. Returns property value (type depends on property type)\r\n\t * \r\n\t * @param   {string} \tpropIdent - SGF property idetificator\r\n\t * @returns {any}\t\tproperty value or values or undefined, if property is missing. \r\n\t */\r\n\t \r\n\tgetProperty(propIdent) {\r\n\t\treturn this.SGFProperties[propIdent];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets property by SGF property identificator.\r\n\t * \r\n\t * @param   {string}          propIdent - SGF property idetificator\r\n\t * @param   {string|string[]} value - property value or values\r\n\t */\r\n\t \r\n\tsetProperty(propIdent, value) {\r\n\t\tif(value == null) delete this.SGFProperties[propIdent];\r\n\t\telse this.SGFProperties[propIdent] = value;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/// SGF RAW METHODS\r\n\t\r\n\t/**\r\n\t * Gets one SGF property value as string (with brackets `[` and `]`).\r\n\t * \r\n\t * @param   {string} propIdent SGF property identificator.\r\n\t * @returns {string} SGF property values or empty string, if node doesn't containg this property.\r\n\t */\r\n\t \r\n\tgetSGFProperty(propIdent) {\r\n\t\tif(this.SGFProperties[propIdent] != null) {\r\n\t\t\tlet propertyValueType = propertyValueTypes[propIdent] || propertyValueTypes._default;\r\n\t\t\t\r\n\t\t\tif(propertyValueType.multiple) {\r\n\t\t\t\tif(!propertyValueType.notEmpty || this.SGFProperties[propIdent].length) {\r\n\t\t\t\t\treturn \"[\"+this.SGFProperties[propIdent].map(propValue => propertyValueType.type.write(propValue).replace(/\\]/g, \"\\\\]\")).join(\"][\")+\"]\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(!propertyValueType.notEmpty || this.SGFProperties[propIdent]) {\r\n\t\t\t\treturn \"[\"+propertyValueType.type.write(this.SGFProperties[propIdent]).replace(/\\]/g, \"\\\\]\")+\"]\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn \"\";\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets one SGF property.\r\n\t * \r\n\t * @param   {string}   propIdent SGF property idetificator\r\n\t * @param   {string[]} propValue SGF property value\r\n\t * @returns {KNode}    this KNode for chaining\r\n\t */\r\n\t \r\n\tsetSGFProperty(propIdent, propValue) {\r\n\t\tif(typeof propValue == \"string\") {\r\n\t\t\tlet parser = new SGFParser(propValue);\r\n\t\t\tpropValue = parser.parsePropertyValues();\r\n\t\t}\r\n\t\t\r\n\t\tlet propertyValueType = propertyValueTypes[propIdent] || propertyValueTypes._default;\r\n\t\t\r\n\t\tif(propertyValueType.multiple) {\r\n\t\t\tif(!propertyValueType.notEmpty || propValue.length) {\r\n\t\t\t\tthis.SGFProperties[propIdent] = propValue.map(val => propertyValueType.type.read(val));\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(!propertyValueType.notEmpty || propValue[0]) {\r\n\t\t\tthis.SGFProperties[propIdent] = propertyValueType.type.read(propValue.join(\"\"));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdelete this.SGFProperties[propIdent];\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets multiple SGF properties.\r\n\t * \r\n\t * @param   {Object}   properties - map with signature propIdent -> propValues.\r\n\t * @returns {KNode}    this KNode for chaining\r\n\t */\r\n\t\r\n\tsetSGFProperties(properties) {\r\n\t\tfor(let ident in properties) {\r\n\t\t\tif(properties.hasOwnProperty(ident)) {\r\n\t\t\t\tthis.setSGFProperty(ident, properties[ident]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets properties of Kifu node based on the sgf string. Usually you won't use this method directly, but use innerSGF property instead.\r\n\t * \r\n\t * Basically it parsers the sgf, takes properties from it and adds them to the node. \r\n\t * Then if there are other nodes in the string, they will be appended to the node as well.\r\n\t * \r\n\t * @param {string} sgf SGF text for current node. It must be without trailing `;`, however it can contain following nodes.\r\n\t * @throws {SGFSyntaxError} throws exception, if sgf string contains invalid SGF.\r\n\t */\r\n\t \r\n\tsetFromSGF(parser) {\r\n\t\t// clean up\r\n\t\tfor(let i = this.children.length-1; i >= 0; i--) {\r\n\t\t\tthis.removeChild(this.children[i]);\r\n\t\t}\r\n\t\tthis.SGFProperties = {};\r\n\t\t\r\n\t\t// and parse properties\r\n\t\tthis.setSGFProperties(parser.parseProperties());\r\n\t\t\r\n\t\t// then we parse the rest of sgf\r\n\t\tif(parser.currentChar == \";\") {\r\n\t\t\t// single kifu node child\r\n\t\t\tlet childNode = new KNode();\r\n\t\t\tthis.appendChild(childNode);\r\n\t\t\tparser.next();\r\n\t\t\tchildNode.setFromSGF(parser);\r\n\t\t}\r\n\t\telse if(parser.currentChar == \"(\") {\r\n\t\t\t// two or more children\r\n\t\t\tparser.parseCollection().forEach((function(jsgf) {\r\n\t\t\t\tthis.appendChild(KNode.fromJS(jsgf));\r\n\t\t\t}).bind(this));\r\n\t\t}\r\n\t\telse if(parser.currentChar) {\r\n\t\t\t// syntax error\r\n\t\t\tthrow new SGFSyntaxError(\"Illegal character in SGF node\", parser);\r\n\t\t}\r\n\t}\r\n\t\r\n\ttoSGF() {\r\n\t\treturn \"(;\"+this.innerSGF+\")\";\r\n\t}\r\n}\r\n","/**\r\n * Utilities methods for Canvas board \r\n */\r\n\r\nimport {BLACK, WHITE} from \"./../core\";\r\n\r\nexport function themeVariable(key, board) {\r\n\treturn typeof board.theme[key] == \"function\" ? board.theme[key](board) : board.theme[key];\r\n}\r\n\r\nexport function getMarkupColor(board, x, y) {\r\n\tif(board.obj_arr[x][y][0].c == BLACK) return themeVariable(\"markupBlackColor\", board);\r\n\telse if(board.obj_arr[x][y][0].c == WHITE) return themeVariable(\"markupWhiteColor\", board);\r\n\treturn themeVariable(\"markupNoneColor\", board);\r\n}\r\n\r\nexport function isHereStone(board, x, y) {\r\n\treturn (board.obj_arr[x][y][0] && board.obj_arr[x][y][0].c == WHITE || board.obj_arr[x][y][0].c == BLACK);\r\n}\r\n\r\nexport function redrawLayer(board, layer) {\r\n\tvar obj, handler;\r\n\t\r\n\tboard[layer].clear();\r\n\tboard[layer].draw(board);\r\n\t\r\n\tfor(var x = 0; x < board.size; x++) {\r\n\t\tfor(var y = 0; y < board.size; y++) {\r\n\t\t\tfor(var z = 0; z < board.obj_arr[x][y].length; z++) {\r\n\t\t\t\tobj = board.obj_arr[x][y][z];\r\n\t\t\t\tif(!obj.type) handler = themeVariable(\"stoneHandler\", board);\r\n\t\t\t\telse if(typeof obj.type == \"string\") handler = themeVariable(\"markupHandlers\", board)[obj.type];\r\n\t\t\t\telse handler = obj.type;\r\n\t\t\r\n\t\t\t\tif(handler[layer]) handler[layer].draw(board[layer].getContext(obj), obj, board);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor(var i = 0; i < board.obj_list.length; i++) {\r\n\t\tobj = board.obj_list[i];\r\n\t\thandler = obj.handler;\r\n\t\t\r\n\t\tif(handler[layer]) handler[layer].draw(board[layer].getContext(obj.args), obj.args, board);\r\n\t}\r\n}\r\n\r\nexport function defaultFieldClear(canvasCtx, field, args, board) {\r\n\tcanvasCtx.clearRect(0, 0, board.fieldWidth, board.fieldHeight);\r\n}\r\n","/* global document, window */\r\n\r\n/**\r\n * @class\r\n * Implements one layer of the HTML5 canvas\r\n */\r\n\r\nexport default class CanvasLayer {\r\n\tconstructor() {\r\n\t\tthis.element = document.createElement('canvas');\r\n\t\tthis.context = this.element.getContext('2d');\r\n\r\n\t\t// Adjust pixel ratio for HDPI screens (e.g. Retina)\r\n\t\tthis.pixelRatio = window.devicePixelRatio || 1;\r\n\t\tif (this.pixelRatio > 1) {\r\n\t\t\tthis.context.scale(this.pixelRatio, this.pixelRatio);\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetDimensions(width, height) {\r\n\t\tthis.element.width = width;\r\n\t\tthis.element.style.width = (width / this.pixelRatio) + 'px';\r\n\t\tthis.element.height = height;\r\n\t\tthis.element.style.height = (height / this.pixelRatio) + 'px';\r\n\t}\r\n\t\r\n\tappendTo(element, weight) {\r\n\t\tthis.element.style.position = 'absolute';\r\n\t\tthis.element.style.zIndex = weight;\r\n\t\telement.appendChild(this.element);\r\n\t}\r\n\t\r\n\tremoveFrom(element) {\r\n\t\telement.removeChild(this.element);\r\n\t}\r\n\t\r\n\tgetContext() {\r\n\t\treturn this.context;\r\n\t}\r\n\t\r\n\tdraw() {\r\n\t\t// abstract method to be implemented\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis.context.clearRect(0,0,this.element.width,this.element.height);\r\n\t}\r\n}\r\n","import {themeVariable} from \"../helpers\";\r\n\r\nexport default {\r\n\tgrid: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\t// draw grid\r\n\t\t\tvar tmp;\r\n\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.lineWidth = themeVariable(\"gridLinesWidth\", board);\r\n\t\t\tcanvasCtx.strokeStyle = themeVariable(\"gridLinesColor\", board);\r\n\t\t\t\r\n\t\t\tvar tx = Math.round(board.left),\r\n\t\t\t\tty = Math.round(board.top),\r\n\t\t\t\tbw = Math.round(board.fieldWidth*(board.size-1)),\r\n\t\t\t\tbh = Math.round(board.fieldHeight*(board.size-1));\r\n\t\t\t\r\n\t\t\tcanvasCtx.strokeRect(tx-board.ls, ty-board.ls, bw, bh);\r\n\r\n\t\t\tfor(var i = 1; i < board.size-1; i++) {\r\n\t\t\t\ttmp = Math.round(board.getX(i))-board.ls;\r\n\t\t\t\tcanvasCtx.moveTo(tmp, ty);\r\n\t\t\t\tcanvasCtx.lineTo(tmp, ty+bh);\r\n\t\t\t\t\r\n\t\t\t\ttmp = Math.round(board.getY(i))-board.ls;\r\n\t\t\t\tcanvasCtx.moveTo(tx, tmp);\r\n\t\t\t\tcanvasCtx.lineTo(tx+bw, tmp);\r\n\t\t\t}\r\n\r\n\t\t\tcanvasCtx.stroke();\r\n\t\t\t\r\n\t\t\t// draw stars\r\n\t\t\tcanvasCtx.fillStyle = themeVariable(\"starColor\", board);\r\n\t\t\t\r\n\t\t\tif(board.starPoints[board.size]) {\r\n\t\t\t\tfor(var key in board.starPoints[board.size]) {\r\n\t\t\t\t\tcanvasCtx.beginPath();\r\n\t\t\t\t\tcanvasCtx.arc(\r\n\t\t\t\t\t\tboard.getX(board.starPoints[board.size][key].x)-board.ls, \r\n\t\t\t\t\t\tboard.getY(board.starPoints[board.size][key].y)-board.ls, \r\n\t\t\t\t\t\tthemeVariable(\"starSize\", board), 0, 2*Math.PI,true\r\n\t\t\t\t\t);\r\n\t\t\t\t\tcanvasCtx.fill();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import CanvasLayer from \"./CanvasLayer\";\r\nimport gridHandler from \"./drawHandlers/grid\";\r\n\r\n/**\r\n * @class\r\n * @extends WGo.CanvasBoard.CanvasLayer\r\n * Layer which renders board grid.\r\n */\r\n \r\nexport default class GridLayer extends CanvasLayer {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\tdraw(board) {\r\n\t\tgridHandler.grid.draw(this.context, {}, board);\r\n\t}\r\n}\r\n","import CanvasLayer from \"./CanvasLayer\";\r\n\r\n/**\r\n * @class\r\n * @extends WGo.CanvasBoard.CanvasLayer\r\n * Layer for shadows. It is slightly translated.\r\n */\r\n\r\nexport default class ShadowLayer extends CanvasLayer {\r\n\tconstructor(board, shadowSize) {\r\n\t\tsuper();\r\n\t\tthis.shadowSize = shadowSize === undefined ? 1 : shadowSize;\r\n\t\tthis.board = board;\r\n\t}\r\n\r\n\tsetDimensions(width, height) {\r\n\t\tsuper.setDimensions(width, height);\r\n\t\tthis.context.setTransform(1, 0, 0, 1, Math.round(this.shadowSize * this.board.stoneRadius / 7), Math.round(this.shadowSize * this.board.stoneRadius / 7));\r\n\t}\r\n}\r\n","/**\r\n * Generic shadow draw handler for all stones\r\n */\r\n\r\nimport { themeVariable } from \"../helpers\";\r\n\r\nexport default {\r\n\tdraw: function (canvasCtx, {x, y, stoneRadius}, args, board) {\r\n\t\tconst blur = themeVariable(\"shadowBlur\", board);\r\n\t\t\r\n\t\tlet gradient = canvasCtx.createRadialGradient(\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tstoneRadius - 1 - blur,\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tstoneRadius + blur\r\n\t\t);\r\n\t\tgradient.addColorStop(0, themeVariable(\"shadowColor\", board));\r\n\t\tgradient.addColorStop(1, themeVariable(\"shadowTransparentColor\", board));\r\n\r\n\t\tcanvasCtx.beginPath();\r\n\t\tcanvasCtx.fillStyle = gradient;\r\n\t\tcanvasCtx.arc(x, y, stoneRadius + blur, 0, 2 * Math.PI, true);\r\n\t\tcanvasCtx.fill();\r\n\t}\r\n}\r\n","import { WHITE } from \"../../core\";\r\nimport shadow from \"./stoneShadow\";\r\n\r\nexport default {\r\n    // draw handler for stone layer\r\n    stone: {\r\n        // drawing function - args object contain info about drawing object, board is main board object\r\n        draw: function (canvasCtx, {x, y, stoneRadius}, {c}) {\r\n            var radgrad;\r\n\r\n            // set stone texture\r\n            if (c == WHITE) {\r\n                radgrad = canvasCtx.createRadialGradient(\r\n                    x - 2 * stoneRadius / 5,\r\n                    y - 2 * stoneRadius / 5,\r\n                    stoneRadius / 3,\r\n                    x - stoneRadius / 5,\r\n                    y - stoneRadius / 5,\r\n                    5 * stoneRadius / 5\r\n                );\r\n                radgrad.addColorStop(0, '#fff');\r\n                radgrad.addColorStop(1, '#aaa');\r\n            }\r\n            else {\r\n                radgrad = canvasCtx.createRadialGradient(\r\n                    x - 2 * stoneRadius / 5,\r\n                    y - 2 * stoneRadius / 5,\r\n                    1,\r\n                    x - stoneRadius / 5,\r\n                    y - stoneRadius / 5,\r\n                    4 * stoneRadius / 5\r\n                );\r\n                radgrad.addColorStop(0, '#666');\r\n                radgrad.addColorStop(1, '#000');\r\n            }\r\n\r\n            // paint stone\r\n            canvasCtx.beginPath();\r\n            canvasCtx.fillStyle = radgrad;\r\n            canvasCtx.arc(x, y, stoneRadius, 0, 2 * Math.PI, true);\r\n            canvasCtx.fill();\r\n        }\r\n    },\r\n\r\n    // adding shadow\r\n    shadow,\r\n}\r\n","import {getMarkupColor, themeVariable} from \"../helpers\";\r\n\r\nexport default {\r\n\tstone: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tvar xr = board.getX(args.x),\r\n\t\t\t\tyr = board.getY(args.y),\r\n\t\t\t\tsr = board.stoneRadius;\r\n\t\t\t\t\r\n\t\t\tcanvasCtx.strokeStyle = args.c || getMarkupColor(board, args.x, args.y);\r\n\t\t\tcanvasCtx.lineWidth = args.lineWidth || themeVariable(\"markupLinesWidth\", board) || 1;\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.arc(xr-board.ls, yr-board.ls, sr/2, 0, 2*Math.PI, true);\r\n\t\t\tcanvasCtx.stroke();\r\n\t\t},\r\n\t},\r\n}","import {getMarkupColor, themeVariable} from \"../helpers\";\r\n\r\nexport default {\r\n\tstone: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tvar xr = board.getX(args.x),\r\n\t\t\t\tyr = board.getY(args.y),\r\n\t\t\t\tsr = Math.round(board.stoneRadius);\r\n\t\t\t\t\r\n\t\t\tcanvasCtx.strokeStyle = args.c || getMarkupColor(board, args.x, args.y);\r\n\t\t\tcanvasCtx.lineWidth = args.lineWidth || themeVariable(\"markupLinesWidth\", board) || 1;\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.rect(Math.round(xr-sr/2)-board.ls, Math.round(yr-sr/2)-board.ls, sr, sr);\r\n\t\t\tcanvasCtx.stroke();\r\n\t\t}\r\n\t}\r\n}","import {getMarkupColor, themeVariable} from \"../helpers\";\r\n\r\nexport default {\r\n\tstone: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tvar xr = board.getX(args.x),\r\n\t\t\t\tyr = board.getY(args.y),\r\n\t\t\t\tsr = board.stoneRadius;\r\n\t\t\t\t\r\n\t\t\tcanvasCtx.strokeStyle = args.c || getMarkupColor(board, args.x, args.y);\r\n\t\t\tcanvasCtx.lineWidth = args.lineWidth || themeVariable(\"markupLinesWidth\", board) || 1;\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.moveTo(xr-board.ls, yr-board.ls-Math.round(sr/2));\r\n\t\t\tcanvasCtx.lineTo(Math.round(xr-sr/2)-board.ls, Math.round(yr+sr/3)+board.ls);\r\n\t\t\tcanvasCtx.lineTo(Math.round(xr+sr/2)+board.ls, Math.round(yr+sr/3)+board.ls);\r\n\t\t\tcanvasCtx.closePath();\r\n\t\t\tcanvasCtx.stroke();\r\n\t\t}\r\n\t}\r\n}","import {getMarkupColor, themeVariable, isHereStone, redrawLayer} from \"../helpers\";\r\n\r\nexport default {\r\n\tstone: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tvar xr = board.getX(args.x),\r\n\t\t\t\tyr = board.getY(args.y),\r\n\t\t\t\tsr = board.stoneRadius,\r\n\t\t\t\tfont = args.font || themeVariable(\"font\", board) || \"\";\r\n\t\t\t\r\n\t\t\tcanvasCtx.fillStyle = args.c || getMarkupColor(board, args.x, args.y);\r\n\t\t\t\r\n\t\t\tif(args.text.length == 1) canvasCtx.font = Math.round(sr*1.5)+\"px \"+font;\r\n\t\t\telse if(args.text.length == 2) canvasCtx.font = Math.round(sr*1.2)+\"px \"+font;\r\n\t\t\telse canvasCtx.font = Math.round(sr)+\"px \"+font;\r\n\t\t\t\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.textBaseline=\"middle\";\r\n\t\t\tcanvasCtx.textAlign=\"center\";\r\n\t\t\tcanvasCtx.fillText(args.text, xr, yr, 2*sr);\r\n\t\t\t\r\n\t\t},\r\n\t},\r\n\t\r\n\t// modifies grid layer too\r\n\tgrid: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tif(!isHereStone(board, args.x, args.y) && !args._nodraw) {\r\n\t\t\t\tvar xr = board.getX(args.x),\r\n\t\t\t\t\tyr = board.getY(args.y),\r\n\t\t\t\t\tsr = board.stoneRadius;\r\n\t\t\t\tthis.clearRect(xr-sr,yr-sr,2*sr,2*sr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tclear: function(canvasCtx, args, board) {\r\n\t\t\tif(!isHereStone(board, args.x, args.y))  {\r\n\t\t\t\targs._nodraw = true;\r\n\t\t\t\tredrawLayer(board, \"grid\");\r\n\t\t\t\tdelete args._nodraw;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n}\r\n","import {getMarkupColor} from \"../helpers\";\r\n\r\nexport default {\r\n\tstone: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tvar xr = board.getX(args.x),\r\n\t\t\t\tyr = board.getY(args.y),\r\n\t\t\t\tsr = board.stoneRadius;\r\n\t\t\t\t\r\n\t\t\tcanvasCtx.fillStyle = args.c || getMarkupColor(board, args.x, args.y);\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.rect(xr-sr/2, yr-sr/2, sr, sr);\r\n\t\t\tcanvasCtx.fill();\r\n\t\t}\r\n\t}\r\n}","import {getMarkupColor, themeVariable} from \"../helpers\";\r\n\r\nexport default {\r\n\tstone: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tvar xr = board.getX(args.x),\r\n\t\t\t\tyr = board.getY(args.y),\r\n\t\t\t\tsr = board.stoneRadius;\r\n\t\t\t\r\n\t\t\tcanvasCtx.strokeStyle = args.c || getMarkupColor(board, args.x, args.y);\r\n\t\t\tcanvasCtx.lineCap = \"round\";\r\n\t\t\tcanvasCtx.lineWidth = (args.lineWidth || themeVariable(\"markupLinesWidth\", board) || 1) * 2 - 1;\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.moveTo(Math.round(xr-sr/2), Math.round(yr-sr/2));\r\n\t\t\tcanvasCtx.lineTo(Math.round(xr+sr/2), Math.round(yr+sr/2));\r\n\t\t\tcanvasCtx.moveTo(Math.round(xr+sr/2)-1, Math.round(yr-sr/2));\r\n\t\t\tcanvasCtx.lineTo(Math.round(xr-sr/2)-1, Math.round(yr+sr/2));\r\n\t\t\tcanvasCtx.stroke();\r\n\t\t\tcanvasCtx.lineCap = \"butt\";\r\n\t\t}\r\n\t}\r\n}","import {getMarkupColor, themeVariable} from \"../helpers\";\r\n\r\nexport default {\r\n\tstone: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tvar xr = board.getX(args.x),\r\n\t\t\t\tyr = board.getY(args.y),\r\n\t\t\t\tsr = board.stoneRadius;\r\n\t\t\t\t\r\n\t\t\tcanvasCtx.strokeStyle = args.c || getMarkupColor(board, args.x, args.y);\r\n\t\t\tcanvasCtx.lineWidth = (args.lineWidth || themeVariable(\"markupLinesWidth\", board) || 1)*2;\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.arc(xr-sr/3, yr-sr/3, sr/6, 0, 2*Math.PI, true);\r\n\t\t\tcanvasCtx.stroke();\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.arc(xr+sr/3, yr-sr/3, sr/6, 0, 2*Math.PI, true);\r\n\t\t\tcanvasCtx.stroke();\r\n\t\t\tcanvasCtx.beginPath();\r\n\t\t\tcanvasCtx.moveTo(xr-sr/1.5,yr);\r\n\t\t\tcanvasCtx.bezierCurveTo(xr-sr/1.5,yr+sr/2,xr+sr/1.5,yr+sr/2,xr+sr/1.5,yr);\r\n\t\t\tcanvasCtx.stroke();\r\n\t\t}\r\n\t}\r\n}","/**\r\n * Draws coordinates on the board \r\n */\r\n\r\nimport {themeVariable} from \"../helpers\";\r\n\r\nexport default {\r\n\tgrid: {\r\n\t\tdraw: function(canvasCtx, args, board) {\r\n\t\t\tvar t, xright, xleft, ytop, ybottom;\r\n\t\t\t\r\n\t\t\tcanvasCtx.fillStyle = themeVariable(\"coordinatesColor\", board);\r\n\t\t\tcanvasCtx.textBaseline = \"middle\";\r\n\t\t\tcanvasCtx.textAlign = \"center\";\r\n\t\t\tcanvasCtx.font = board.stoneRadius+\"px \"+(board.font || \"\");\r\n\t\t\t\r\n\t\t\txright = board.getX(-0.75);\r\n\t\t\txleft = board.getX(board.size-0.25);\r\n\t\t\tytop = board.getY(-0.75);\r\n\t\t\tybottom = board.getY(board.size-0.25);\r\n\t\t\t\r\n\t\t\tconst coordinatesX = themeVariable(\"coordinatesX\", board);\r\n\t\t\tconst coordinatesY = themeVariable(\"coordinatesY\", board);\r\n\r\n\t\t\tfor(var i = 0; i < board.size; i++) {\r\n\t\t\t\tt = board.getY(i);\r\n\t\t\t\tcanvasCtx.fillText(coordinatesX[i], xright, t);\r\n\t\t\t\tcanvasCtx.fillText(coordinatesX[i], xleft, t);\r\n\t\t\t\t\r\n\t\t\t\tt = board.getX(i);\r\n\t\t\t\tcanvasCtx.fillText(coordinatesY[i], t, ytop);\r\n\t\t\t\tcanvasCtx.fillText(coordinatesY[i], t, ybottom);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcanvasCtx.fillStyle = \"black\";\r\n\t\t}\r\n\t}\r\n}\r\n","import shellStone from \"./drawHandlers/shellStone\";\nimport glassStone from \"./drawHandlers/glassStone\";\nimport circle from \"./drawHandlers/circle\";\nimport square from \"./drawHandlers/square\";\nimport triangle from \"./drawHandlers/triangle\";\nimport label from \"./drawHandlers/label\";\nimport dot from \"./drawHandlers/dot\";\nimport xMark from \"./drawHandlers/xMark\";\nimport smileyFace from \"./drawHandlers/smileyFace\";\nimport coordinates from \"./drawHandlers/coordinates\";\n\n/** \n * Object containing default graphical properties of a board.\n * A value of all properties can be even static value or function, returning final value.\n * Theme object doesn't set board and stone textures - they are set separately.\n */ \n\nexport default {\n    // stones\n    stoneHandler: glassStone,\n    stoneSize: function(board) {\n        const fieldSize = Math.min(board.fieldWidth, board.fieldHeight);\n        return 8/17*fieldSize;\n    },\n\n    // shadow\n    shadowColor: \"rgba(62,32,32,0.5)\",\n    shadowTransparentColor: \"rgba(62,32,32,0)\",\n    shadowBlur: function(board){\n        return board.stoneRadius*0.1;\n    },\n    shadowSize: 1,\n\n    // markup\n    markupBlackColor: \"rgba(255,255,255,0.9)\",\n    markupWhiteColor: \"rgba(0,0,0,0.7)\",\n    markupNoneColor: \"rgba(0,0,0,0.7)\",\n    markupLinesWidth: function(board) {\n        return board.stoneRadius/8;\n    },\n    markupHandlers: {\n        CR: circle,\n        LB: label,\n        SQ: square,\n        TR: triangle,\n        MA: xMark,\n        SL: dot,\n        SM: smileyFace,\n    },\n\n    // grid & star points\n    gridLinesWidth: function(board) {\n        return board.stoneRadius/15;\n    },\n    gridLinesColor: \"#654525\",\n    starColor: \"#531\",\n    starSize: function(board) {\n        return (board.stoneRadius/8)+1;\n    },\n    \n    // coordinates\n    coordinatesHandler: coordinates,\n    coordinatesColor: \"#531\",\n    coordinatesX: \"ABCDEFGHJKLMNOPQRST\",\n    coordinatesY: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19],\n\n    // other\n    variationColor: \"rgba(0,32,128,0.8)\",\n    font: \"calibri\",\n    linesShift: 0.25,\n}\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var assignMergeValue = require('./_assignMergeValue'),\n    cloneBuffer = require('./_cloneBuffer'),\n    cloneTypedArray = require('./_cloneTypedArray'),\n    copyArray = require('./_copyArray'),\n    initCloneObject = require('./_initCloneObject'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = object[key],\n      srcValue = source[key],\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || (srcIndex && isFunction(objValue))) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","var Stack = require('./_Stack'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseFor = require('./_baseFor'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isObject = require('./isObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    if (isObject(srcValue)) {\n      stack || (stack = new Stack);\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(object[key], srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nmodule.exports = baseMerge;\n","var baseMerge = require('./_baseMerge'),\n    isObject = require('./isObject');\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nmodule.exports = customDefaultsMerge;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","var apply = require('./_apply'),\n    baseRest = require('./_baseRest'),\n    customDefaultsMerge = require('./_customDefaultsMerge'),\n    mergeWith = require('./mergeWith');\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nmodule.exports = defaultsDeep;\n","/* global document, window */\n\n/**\n * Contains implementation of go board.\n * @module CanvasBoard\n */\n\nimport { themeVariable, defaultFieldClear } from \"./helpers\";\nimport GridLayer from \"./GridLayer\";\nimport ShadowLayer from \"./ShadowLayer\";\nimport CanvasLayer from \"./CanvasLayer\";\nimport theme from \"./defaultTheme\";\nimport defaultsDeep from \"lodash/defaultsDeep\";\n\n// Private methods of WGo.CanvasBoard\n\nvar calcLeftMargin = function (board) {\n\treturn (3 * board.width) / (4 * (board.bx + 1 - board.tx) + 2) - board.fieldWidth * board.tx;\n}\n\nvar calcTopMargin = function (board) {\n\treturn (3 * board.height) / (4 * (board.by + 1 - board.ty) + 2) - board.fieldHeight * board.ty;\n}\n\nvar calcFieldWidth = function (board) {\n\treturn (4 * board.width) / (4 * (board.bx + 1 - board.tx) + 2);\n}\n\nvar calcFieldHeight = function (board) {\n\treturn (4 * board.height) / (4 * (board.by + 1 - board.ty) + 2);\n}\n\nvar drawFieldObject = function (drawingFn, context, board, obj) {\n\tconst x = board.fieldWidth / 2;\n\tconst y = board.fieldHeight / 2;\n\tconst leftOffset = board.left + obj.x * board.fieldWidth - x;\n\tconst topOffset = board.top + obj.y * board.fieldHeight - y;\n\n\tcontext.save();\n\tcontext.transform(1, 0, 0, 1, leftOffset, topOffset);\n\tcontext.beginPath();\n\tcontext.rect(0, 0, board.fieldWidth, board.fieldHeight);\n\t//context.clip();\n\n\tdrawingFn(context, {\n\t\tx,\n\t\ty,\n\t\tstoneRadius: board.stoneRadius\n\t}, obj, board);\n\n\tcontext.restore();\n}\n\nvar clearField = function (board, x, y) {\n\tvar handler;\n\tfor (var z = 0; z < board.obj_arr[x][y].length; z++) {\n\t\tvar obj = board.obj_arr[x][y][z];\n\t\tif (!obj.type) handler = themeVariable(\"stoneHandler\", board);\n\t\telse if (typeof obj.type == \"string\") handler = themeVariable(\"markupHandlers\", board)[obj.type];\n\t\telse handler = obj.type;\n\n\t\tfor (var layer in handler) {\n\t\t\tdrawFieldObject(\n\t\t\t\thandler[layer].clear ? handler[layer].clear : defaultFieldClear, \n\t\t\t\tboard[layer].getContext(obj), \n\t\t\t\tboard, \n\t\t\t\tobj\n\t\t\t);\n\t\t}\n\t}\n}\n\n// Draws all object on specified field\nvar drawField = function (board, x, y) {\n\tvar handler;\n\tfor (let z = 0; z < board.obj_arr[x][y].length; z++) {\n\t\tlet obj = board.obj_arr[x][y][z];\n\n\t\tif (!obj.type) handler = themeVariable(\"stoneHandler\", board);\n\t\telse if (typeof obj.type == \"string\") handler = themeVariable(\"markupHandlers\", board)[obj.type];\n\t\telse handler = obj.type;\n\n\t\tfor (let layer in handler) {\n\t\t\tdrawFieldObject(handler[layer].draw, board[layer].getContext(obj), board, obj);\n\t\t}\n\t}\n}\n\nvar getMousePos = function (board, e) {\n\t// new hopefully better translation of coordinates\n\n\tvar x, y;\n\n\tx = e.layerX * board.pixelRatio;\n\tx -= board.left;\n\tx /= board.fieldWidth;\n\tx = Math.round(x);\n\n\ty = e.layerY * board.pixelRatio;\n\ty -= board.top;\n\ty /= board.fieldHeight;\n\ty = Math.round(y);\n\n\treturn {\n\t\tx: x >= board.size ? -1 : x,\n\t\ty: y >= board.size ? -1 : y\n\t};\n}\n\nvar updateDim = function (board) {\n\tboard.element.style.width = (board.width / board.pixelRatio) + \"px\";\n\tboard.element.style.height = (board.height / board.pixelRatio) + \"px\";\n\n\tboard.stoneRadius = themeVariable(\"stoneSize\", board);\n\t//if(this.autoLineWidth) this.lineWidth = this.stoneRadius/7; //< 15 ? 1 : 3;\n\tboard.ls = themeVariable(\"linesShift\", board);\n\n\tfor (var i = 0; i < board.layers.length; i++) {\n\t\tboard.layers[i].setDimensions(board.width, board.height);\n\t}\n}\n\nexport default class CanvasBoard {\n\t/**\n\t * CanvasBoard class constructor - it creates a canvas board.\n\t *\n\t * @alias WGo.CanvasBoard\n\t * @class\n\t * @implements BLACKoard\n\t * @param {HTMLElement} elem DOM element to put in\n\t * @param {Object} config Configuration object. It is object with \"key: value\" structure. Possible configurations are:\n\t *\n\t * * size: number - size of the board (default: 19)\n\t * * width: number - width of the board (default: 0)\n\t * * height: number - height of the board (default: 0)\n\t * * font: string - font of board writings (!deprecated)\n\t * * lineWidth: number - line width of board drawings (!deprecated)\n\t * * autoLineWidth: boolean - if set true, line width will be automatically computed accordingly to board size - this option rewrites 'lineWidth' /and it will keep markups sharp/ (!deprecated)\n\t * * starPoints: Object - star points coordinates, defined for various board sizes. Look at CanvasBoard.default for more info.\n\t * * stoneHandler: CanvasBoard.DrawHandler - stone drawing handler (default: CanvasBoard.drawHandlers.SHELL)\n\t * * starSize: number - size of star points (default: 1). Radius of stars is dynamic, however you can modify it by given constant. (!deprecated)\n\t * * stoneSize: number - size of stone (default: 1). Radius of stone is dynamic, however you can modify it by given constant. (!deprecated)\n\t * * shadowSize: number - size of stone shadow (default: 1). Radius of shadow is dynamic, however you can modify it by given constant. (!deprecated)\n\t * * background: string - background of the board, it can be either color (#RRGGBB) or url. Empty string means no background. (default: WGo.DIR+\"wood1.jpg\")\n\t * * section: {\n\t *     top: number,\n\t *     right: number,\n\t *     bottom: number,\n\t *     left: number\n\t *   }\n\t *   It defines a section of board to be displayed. You can set a number of rows(or cols) to be skipped on each side.\n\t *   Numbers can be negative, in that case there will be more empty space. In default all values are zeros.\n\t * * theme: Object - theme object, which defines all graphical attributes of the board. Default theme object is \"WGo.CanvasBoard.themes.default\". For old look you may use \"WGo.CanvasBoard.themes.old\".\n\t *\n\t * Note: properties lineWidth, autoLineWidth, starPoints, starSize, stoneSize and shadowSize will be considered only if you set property 'theme' to 'WGo.CanvasBoard.themes.old'.\n\t */\n\n\tconstructor(elem, config) {\n\t\t// merge user config with default\n\t\tthis.config = defaultsDeep(config || {}, CanvasBoard.defaultConfig);\n\n\t\t// and store it directly on `this`\n\t\tObject.keys(this.config).forEach(key => {\n\t\t\tthis[key] = this.config[key];\n\t\t});\n\n\t\t// set section if set\n\t\tthis.tx = this.section.left;\n\t\tthis.ty = this.section.top;\n\t\tthis.bx = this.size - 1 - this.section.right;\n\t\tthis.by = this.size - 1 - this.section.bottom;\n\n\t\t// init board\n\t\tthis.init();\n\n\t\t// append to element\n\t\telem.appendChild(this.element);\n\n\t\t// set initial dimensions\n\n\t\t// set the pixel ratio for HDPI (e.g. Retina) screens\n\t\tthis.pixelRatio = window.devicePixelRatio || 1;\n\n\t\tif (this.width && this.height) this.setDimensions(this.width, this.height);\n\t\telse if (this.width) this.setWidth(this.width);\n\t\telse if (this.height) this.setHeight(this.height);\n\t}\n\n\t/**\n     * Initialization method, it is called in constructor. You shouldn't call it, but you can alter it.\n\t */\n\n\tinit() {\n\n\t\t// placement of objects (in 3D array)\n\t\tthis.obj_arr = [];\n\t\tfor (var i = 0; i < this.size; i++) {\n\t\t\tthis.obj_arr[i] = [];\n\t\t\tfor (var j = 0; j < this.size; j++) this.obj_arr[i][j] = [];\n\t\t}\n\n\t\t// other objects, stored in list\n\t\tthis.obj_list = [];\n\n\t\t// layers\n\t\tthis.layers = [];\n\n\t\t// event listeners, binded to board\n\t\tthis.listeners = [];\n\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = 'wgo-board';\n\t\tthis.element.style.position = 'relative';\n\n\t\tif (this.background) {\n\t\t\tif (this.background[0] == \"#\") this.element.style.backgroundColor = this.background;\n\t\t\telse {\n\t\t\t\tthis.element.style.backgroundImage = \"url('\" + this.background + \"')\";\n\t\t\t\t/*this.element.style.backgroundRepeat = \"repeat\";*/\n\t\t\t}\n\t\t}\n\n\t\tthis.grid = new GridLayer();\n\t\tthis.shadow = new ShadowLayer(this, themeVariable(\"shadowSize\", this));\n\t\tthis.stone = new CanvasLayer();\n\n\t\tthis.addLayer(this.grid, 100);\n\t\tthis.addLayer(this.shadow, 200);\n\t\tthis.addLayer(this.stone, 300);\n\t}\n\n\tsetWidth(width) {\n\t\tthis.width = width;\n\t\tthis.width *= this.pixelRatio;\n\t\tthis.fieldHeight = this.fieldWidth = calcFieldWidth(this);\n\t\tthis.left = calcLeftMargin(this);\n\n\t\tthis.height = (this.by - this.ty + 1.5) * this.fieldHeight;\n\t\tthis.top = calcTopMargin(this);\n\n\t\tupdateDim(this);\n\t\tthis.redraw();\n\t}\n\n\tsetHeight(height) {\n\t\tthis.height = height;\n\t\tthis.height *= this.pixelRatio;\n\t\tthis.fieldWidth = this.fieldHeight = calcFieldHeight(this);\n\t\tthis.top = calcTopMargin(this);\n\n\t\tthis.width = (this.bx - this.tx + 1.5) * this.fieldWidth;\n\t\tthis.left = calcLeftMargin(this);\n\n\t\tupdateDim(this);\n\t\tthis.redraw();\n\t}\n\n\tsetDimensions(width, height) {\n\t\tthis.width = width || parseInt(this.element.style.width, 10);\n\t\tthis.width *= this.pixelRatio;\n\t\tthis.height = height || parseInt(this.element.style.height, 10);\n\t\tthis.height *= this.pixelRatio;\n\n\t\tthis.fieldWidth = calcFieldWidth(this);\n\t\tthis.fieldHeight = calcFieldHeight(this);\n\t\tthis.left = calcLeftMargin(this);\n\t\tthis.top = calcTopMargin(this);\n\n\t\tupdateDim(this);\n\t\tthis.redraw();\n\t}\n\n\t/**\n\t * Get currently visible section of the board\n\t */\n\n\tgetSection() {\n\t\treturn this.section;\n\t}\n\n\t/**\n\t * Set section of the board to be displayed\n\t */\n\n\tsetSection(section_or_top, right, bottom, left) {\n\t\tif (typeof section_or_top == \"object\") {\n\t\t\tthis.section = section_or_top;\n\t\t}\n\t\telse {\n\t\t\tthis.section = {\n\t\t\t\ttop: section_or_top,\n\t\t\t\tright: right,\n\t\t\t\tbottom: bottom,\n\t\t\t\tleft: left,\n\t\t\t}\n\t\t}\n\n\t\tthis.tx = this.section.left;\n\t\tthis.ty = this.section.top;\n\t\tthis.bx = this.size - 1 - this.section.right;\n\t\tthis.by = this.size - 1 - this.section.bottom;\n\n\t\tthis.setDimensions();\n\t}\n\n\tsetSize(size) {\n\t\tsize = size || 19;\n\n\t\tif (size != this.size) {\n\t\t\tthis.size = size;\n\n\t\t\tthis.obj_arr = [];\n\t\t\tfor (var i = 0; i < this.size; i++) {\n\t\t\t\tthis.obj_arr[i] = [];\n\t\t\t\tfor (var j = 0; j < this.size; j++) this.obj_arr[i][j] = [];\n\t\t\t}\n\n\t\t\tthis.bx = this.size - 1 - this.section.right;\n\t\t\tthis.by = this.size - 1 - this.section.bottom;\n\t\t\tthis.setDimensions();\n\t\t}\n\t}\n\n\t/**\n\t * Redraw everything.\n\t */\n\n\tredraw() {\n\t\ttry {\n\t\t\t// redraw layers\n\t\t\tfor (let i = 0; i < this.layers.length; i++) {\n\t\t\t\tthis.layers[i].clear(this);\n\t\t\t\tthis.layers[i].draw(this);\n\t\t\t}\n\n\t\t\t// redraw field objects\n\t\t\tfor (let i = 0; i < this.size; i++) {\n\t\t\t\tfor (let j = 0; j < this.size; j++) {\n\t\t\t\t\tdrawField(this, i, j);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// redraw custom objects\n\t\t\tfor (let i = 0; i < this.obj_list.length; i++) {\n\t\t\t\tvar obj = this.obj_list[i];\n\t\t\t\tvar handler = obj.handler;\n\n\t\t\t\tfor (var layer in handler) {\n\t\t\t\t\thandler[layer].draw(this[layer].getContext(obj.args), obj.args, this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (err) {\n\t\t\t// If the board is too small some canvas painting function can throw an exception, but we don't want to break our app\n\t\t\tconsole.log(\"WGo board failed to render. Error: \" + err.message);\n\t\t}\n\t}\n\n\t/**\n\t * Get absolute X coordinate\n\t *\n\t * @param {number} x relative coordinate\n\t */\n\n\tgetX(x) {\n\t\treturn this.left + x * this.fieldWidth;\n\t}\n\n\t/**\n\t * Get absolute Y coordinate\n\t *\n\t * @param {number} y relative coordinate\n\t */\n\n\tgetY(y) {\n\t\treturn this.top + y * this.fieldHeight;\n\t}\n\n\t/**\n\t * Add layer to the board. It is meant to be only for canvas layers.\n\t *\n\t * @param {CanvasBoard.CanvasLayer} layer to add\n\t * @param {number} weight layer with biggest weight is on the top \n\t */\n\n\taddLayer(layer, weight) {\n\t\tlayer.appendTo(this.element, weight);\n\t\tlayer.setDimensions(this.width, this.height);\n\t\tthis.layers.push(layer);\n\t}\n\n\t/**\n\t * Remove layer from the board.\n\t *\n\t * @param {CanvasBoard.CanvasLayer} layer to remove\n\t */\n\n\tremoveLayer(layer) {\n\t\tvar i = this.layers.indexOf(layer);\n\t\tif (i >= 0) {\n\t\t\tthis.layers.splice(i, 1);\n\t\t\tlayer.removeFrom(this.element);\n\t\t}\n\t}\n\n\tupdate(changes) {\n\t\tvar i;\n\t\tif (changes.remove && changes.remove == \"all\") this.removeAllObjects();\n\t\telse if (changes.remove) {\n\t\t\tfor (i = 0; i < changes.remove.length; i++) this.removeObject(changes.remove[i]);\n\t\t}\n\n\t\tif (changes.add) {\n\t\t\tfor (i = 0; i < changes.add.length; i++) this.addObject(changes.add[i]);\n\t\t}\n\t}\n\n\taddObject(obj) {\n\t\t// handling multiple objects\n\t\tif (obj.constructor == Array) {\n\t\t\tfor (var i = 0; i < obj.length; i++) this.addObject(obj[i]);\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// clear all objects on object's coordinates\n\t\t\tclearField(this, obj.x, obj.y);\n\n\t\t\t// if object of this type is on the board, replace it\n\t\t\tvar layers = this.obj_arr[obj.x][obj.y];\n\t\t\tfor (var z = 0; z < layers.length; z++) {\n\t\t\t\tif (layers[z].type == obj.type) {\n\t\t\t\t\tlayers[z] = obj;\n\t\t\t\t\tdrawField(this, obj.x, obj.y);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if object is a stone, add it at the beginning, otherwise at the end\n\t\t\tif (!obj.type) layers.unshift(obj);\n\t\t\telse layers.push(obj);\n\n\t\t\t// draw all objects\n\t\t\tdrawField(this, obj.x, obj.y);\n\t\t}\n\t\tcatch (err) {\n\t\t\t// If the board is too small some canvas painting function can throw an exception, but we don't want to break our app\n\t\t\tconsole.log(\"WGo board failed to render. Error: \" + err.message);\n\t\t}\n\t}\n\n\tremoveObject(obj) {\n\t\t// handling multiple objects\n\t\tif (obj.constructor == Array) {\n\t\t\tfor (var n = 0; n < obj.length; n++) this.removeObject(obj[n]);\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tvar i;\n\t\t\tfor (var j = 0; j < this.obj_arr[obj.x][obj.y].length; j++) {\n\t\t\t\tif (this.obj_arr[obj.x][obj.y][j].type == obj.type) {\n\t\t\t\t\ti = j;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i === undefined) return;\n\n\t\t\t// clear all objects on object's coordinates\n\t\t\tclearField(this, obj.x, obj.y);\n\n\t\t\tthis.obj_arr[obj.x][obj.y].splice(i, 1);\n\n\t\t\tdrawField(this, obj.x, obj.y);\n\t\t}\n\t\tcatch (err) {\n\t\t\t// If the board is too small some canvas painting function can throw an exception, but we don't want to break our app\n\t\t\tconsole.log(\"WGo board failed to render. Error: \" + err.message);\n\t\t}\n\t}\n\n\tremoveObjectsAt(x, y) {\n\t\tif (!this.obj_arr[x][y].length) return;\n\n\t\tclearField(this, x, y);\n\t\tthis.obj_arr[x][y] = [];\n\t}\n\n\tremoveAllObjects() {\n\t\tthis.obj_arr = [];\n\t\tfor (var i = 0; i < this.size; i++) {\n\t\t\tthis.obj_arr[i] = [];\n\t\t\tfor (var j = 0; j < this.size; j++) this.obj_arr[i][j] = [];\n\t\t}\n\t\tthis.redraw();\n\t}\n\n\taddCustomObject(handler, args) {\n\t\tthis.obj_list.push({ handler: handler, args: args });\n\t\tthis.redraw();\n\t}\n\n\tremoveCustomObject(handler, args) {\n\t\tfor (var i = 0; i < this.obj_list.length; i++) {\n\t\t\tvar obj = this.obj_list[i];\n\t\t\tif (obj.handler == handler && obj.args == args) {\n\t\t\t\tthis.obj_list.splice(i, 1);\n\t\t\t\tthis.redraw();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\taddEventListener(type, callback) {\n\t\tvar _this = this,\n\t\t\tevListener = {\n\t\t\t\ttype: type,\n\t\t\t\tcallback: callback,\n\t\t\t\thandleEvent: function (e) {\n\t\t\t\t\tvar coo = getMousePos(_this, e);\n\t\t\t\t\tcallback(coo.x, coo.y, e);\n\t\t\t\t}\n\t\t\t};\n\n\t\tthis.element.addEventListener(type, evListener, true);\n\t\tthis.listeners.push(evListener);\n\t}\n\n\tremoveEventListener(type, callback) {\n\t\tfor (var i = 0; i < this.listeners.length; i++) {\n\t\t\tvar listener = this.listeners[i];\n\t\t\tif (listener.type == type && listener.callback == callback) {\n\t\t\t\tthis.element.removeEventListener(listener.type, listener, true);\n\t\t\t\tthis.listeners.splice(i, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n\nCanvasBoard.defaultConfig = {\n\tsize: 19,\n\twidth: 0,\n\theight: 0,\n\tstarPoints: {\n\t\t19: [\n\t\t\t{ x: 3, y: 3 },\n\t\t\t{ x: 9, y: 3 },\n\t\t\t{ x: 15, y: 3 },\n\t\t\t{ x: 3, y: 9 },\n\t\t\t{ x: 9, y: 9 },\n\t\t\t{ x: 15, y: 9 },\n\t\t\t{ x: 3, y: 15 },\n\t\t\t{ x: 9, y: 15 },\n\t\t\t{ x: 15, y: 15 }\n\t\t],\n\t\t13: [\n\t\t\t{ x: 3, y: 3 },\n\t\t\t{ x: 9, y: 3 },\n\t\t\t{ x: 3, y: 9 },\n\t\t\t{ x: 9, y: 9 }],\n\t\t9: [\n\t\t\t{ x: 4, y: 4 }\n\t\t],\n\t},\n\tsection: {\n\t\ttop: 0,\n\t\tright: 0,\n\t\tbottom: 0,\n\t\tleft: 0,\n\t},\n\tcoordinates: false,\n\ttheme: theme\n}\n","/**\r\n * Simple events handling.\r\n */\r\n \r\n export default function EventMixin(baseClass) {\r\n\tbaseClass = baseClass || Object;\r\n\t\r\n\treturn class /*extends baseClass*/ {\r\n\t\tconstructor() {\r\n\t\t\t/*super();*/\r\n\t\t\tthis.__events = {};\r\n\t\t}\r\n\t\t\r\n\t\ton(evName, callback) {\r\n\t\t\tthis.__events[evName] = this.__events[evName] || [];\r\n\t\t\tthis.__events[evName].push(callback);\r\n\t\t}\r\n\t\t\r\n\t\toff(evName, callback) {\r\n\t\t\tif(this.__events[evName]) {\r\n\t\t\t\tif(callback == null) this.__events[evName] = [];\r\n\t\t\t\tthis.__events[evName] = this.__events[evName].filter((fn) => fn != callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\ttrigger(evName, payload) {\r\n\t\t\tif(this.__events[evName]) {\r\n\t\t\t\tthis.__events[evName].forEach((fn) => fn(payload));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import KNode from \"./KNode\";\r\nimport EventMixin from \"../EventMixin\";\r\nimport Game, {rules, DEFAULT_RULES} from \"../Game\";\r\nimport {markupProperties, setupProperties} from \"./propertyValueTypes\";\r\n\r\nconst setupPropertiesReversed = Object.keys(setupProperties).reduce((obj, key) => {\r\n\tobj[setupProperties[key]] = key;\r\n\treturn obj;\r\n},{});\r\n\r\n/**\r\n * Kifu class - handles kifu - it can traverse and edit it. Has powerful api.\r\n * In previous WGo it would be KifuReader.\r\n */\r\n\r\nexport default class Kifu extends EventMixin() {\r\n\t/**\r\n\t * Creates a Kifu object from the JSGF object\r\n\t * \r\n\t * @param   {Object} jsgf object\r\n\t * @returns {Kifu}   Kifu object\r\n\t */\r\n\tstatic fromJS(jsgf) {\r\n\t\treturn new Kifu(KNode.fromJS(jsgf));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Creates a Kifu object from the SGF string\r\n\t * \r\n\t * @param   {string} sgf string\r\n\t * @returns {Kifu}   Kifu instance\r\n\t */\r\n\tstatic fromSGF(sgf) {\r\n\t\treturn new Kifu(KNode.fromSGF(sgf));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Constructs a new empty Kifu object or Kifu object from a KNode.\r\n\t * \r\n\t * @param {KNode} [kNode] - KNode object which will serve as root node of the kifu.\r\n\t */\r\n    \r\n\t//constructor()\r\n\t//constructor(kNode)\r\n\t//constructor(boardSize)\r\n\tconstructor(boardSize, ruleSet) {\r\n\t\tsuper();\r\n\t\t\r\n\t\t// Board size argument\r\n\t\tif(typeof boardSize == \"number\") {\r\n\t\t\tthis.currentNode = this.rootNode = new KNode();\r\n\t\t\tthis.rootNode.setProperty(\"SZ\", boardSize);\r\n\t\t\t\r\n\t\t\t// ... and rules argument as string\r\n\t\t\tif(typeof ruleSet == \"string\") {\r\n\t\t\t\tthis.rootNode.setProperty(\"RU\", ruleSet);\r\n\t\t\t\tthis.ruleSet = rules[ruleSet] || rules[DEFAULT_RULES];\r\n\t\t\t}\r\n\t\t\t// ... and rules argument as object\r\n\t\t\telse if(ruleSet != null) {\r\n\t\t\t\tthis.ruleSet = ruleSet;\r\n\t\t\t}\r\n\t\t\t// ... and no second argument\r\n\t\t\telse {\r\n\t\t\t\tthis.rootNode.setProperty(\"RU\", DEFAULT_RULES);\r\n\t\t\t\tthis.ruleSet = rules[DEFAULT_RULES];\r\n\t\t\t}\r\n\t\t}\r\n\t\t// KNode argument\r\n\t\telse if(boardSize != null) {\r\n\t\t\tlet kNode = boardSize;\r\n\t\t\tthis.rootNode = kNode.root;\r\n\t\t\tthis.currentNode = kNode;\r\n\t\t\t\r\n\t\t\tthis.ruleSet = rules[this.rootNode.getProperty(\"RU\")] || rules[DEFAULT_RULES];\r\n\t\t\tboardSize = this.rootNode.getProperty(\"SZ\");\r\n\t\t}\r\n\t\t// No argument\r\n\t\telse {\r\n\t\t\tthis.currentNode = this.rootNode = new KNode();\r\n\t\t\tthis.ruleSet = rules[DEFAULT_RULES];\r\n\t\t\tthis.rootNode.setProperty(\"SZ\", 19);\r\n\t\t\tthis.rootNode.setProperty(\"RU\", DEFAULT_RULES);\r\n\t\t}\r\n\t\t\r\n\t\tthis.game = new Game(boardSize, this.ruleSet);\r\n\t}\r\n\t\r\n\tget blackName() {\r\n\t\treturn this.rootNode.getProperty(\"PB\");\r\n\t}\r\n\t\r\n\tset blackName(name) {\r\n\t\tthis.setGameInfo(\"PB\", name);\r\n\t}\r\n\t\r\n\tget blackRank() {\r\n\t\treturn this.rootNode.getProperty(\"BR\");\r\n\t}\r\n\t\r\n\tset blackRank(rank) {\r\n\t\tthis.setGameInfo(\"BR\", rank);\r\n\t}\r\n\t\r\n\tget blackTeam() {\r\n\t\treturn this.rootNode.getProperty(\"BT\");\r\n\t}\r\n\t\r\n\tset blackTeam(team) {\r\n\t\tthis.setGameInfo(\"BT\", team);\r\n\t}\r\n\t\r\n\tget whiteName() {\r\n\t\treturn this.rootNode.getProperty(\"PW\");\r\n\t}\r\n\t\r\n\tset whiteName(name) {\r\n\t\tthis.setGameInfo(\"PW\", name);\r\n\t}\r\n\t\r\n\tget whiteRank() {\r\n\t\treturn this.rootNode.getProperty(\"WR\");\r\n\t}\r\n\t\r\n\tset whiteRank(rank) {\r\n\t\tthis.setGameInfo(\"WR\", rank);\r\n\t\t\r\n\t}\r\n\t\r\n\tget whiteTeam() {\r\n\t\treturn this.rootNode.getProperty(\"WT\");\r\n\t}\r\n\t\r\n\tset whiteTeam(team) {\r\n\t\tthis.setGameInfo(\"WT\", team);\r\n\t}\r\n\t\r\n\tget rules() {\r\n\t\treturn this.rootNode.getProperty(\"RU\");\r\n\t}\r\n\t\r\n\tset rules(rules) {\r\n\t\tthis.setRulesSet(rules[rules] || rules[DEFAULT_RULES]);\r\n\t\tthis.setGameInfo(\"RU\", rules);\t\t\r\n\t}\r\n\t\r\n\tget boardSize() {\r\n\t\treturn this.rootNode.getProperty(\"SZ\") || 19;\r\n\t}\r\n\t\r\n\tset boardSize(size) {\r\n\t\tthis.setGameInfo(\"SZ\", size);\t\r\n\t}\r\n\t\t\r\n\tsetRulesSet(ruleSet) {\r\n\t\tthis.ruleSet = ruleSet;\r\n\t\tthis.game.setRules(ruleSet);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets specified property or all available game info as an object. In this context, all properties \r\n\t * of the root node are considered as game info.\r\n\t * \r\n\t * @param {string} [property] of info (sgf identificator), if omitted you will get all properties.\r\n\t */\r\n\tgetGameInfo(property) {\r\n\t\tif(property != null) return this.rootNode.getProperty(property);\r\n\t\telse return Object.assign({}, this.rootNode.SGFProperties);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets game info (as SGF property to root node).\r\n\t * \r\n\t * @param {string} property of info (sgf identificator)\r\n\t * @param {string} value    of info (sgf value)\r\n\t */\r\n\tsetGameInfo(property, value) {\r\n\t\tvar oldValue = this.rootNode.getProperty(property);\r\n\t\tthis.rootNode.setProperty(property, value);\r\n\t\tthis.trigger(\"infoChange\", {\r\n\t\t\ttarget: this,\r\n\t\t\tnode: this.rootNode,\r\n\t\t\tkey: property,\r\n\t\t\toldValue: oldValue,\r\n\t\t\tvalue: value\r\n\t\t});\r\n\t}\r\n\t\r\n\t/* ======= NODE MANIPULATION FUNCTIONALITY ================================================== */\r\n\t\r\n\t/**\r\n\t * Adds a child node to the current node, you can specify a position.\r\n\t * \r\n\t * @param {KNode}  node  a node to add, if omitted a new node will be created.\r\n\t * @param {number} index - position of node (0 means first position), if omitted the node will be added as last child of current node.\r\n\t */\r\n\taddBranch(node, index) {\r\n\t\tif(typeof node == \"number\") {\r\n\t\t\tindex = node;\r\n\t\t\tnode = new KNode();\r\n\t\t}\r\n\t\tif(node == null) {\r\n\t\t\tnode = new KNode();\r\n\t\t}\r\n\t\t\r\n\t\tif(index == null || index >= this.currentNode.children.length) {\r\n\t\t\tthis.currentNode.appendChild(node);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.currentNode.insertBefore(node, this.currentNode.children[index]);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Moves current's node child from one position to another\r\n\t * \r\n\t * @param {number} from index\r\n\t * @param {number} to   index\r\n\t */\r\n\tmoveBranch(from, to) {\r\n\t\tif(from > to) {\r\n\t\t\tthis.currentNode.children.splice(to, 0, this.currentNode.children.splice(from, 1)[0]);\r\n\t\t}\r\n\t\telse if(from < to) {\r\n\t\t\tthis.currentNode.children.splice(to+1, 1, this.currentNode.children.splice(from, 1)[0]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes current's node child and all its descendants.\r\n\t * \r\n\t * @param {number} index of child node\r\n\t */\r\n\tremoveBranch(index) {\r\n\t\tif(index == null) {\r\n\t\t\tindex = this.currentNode.children.length - 1;\r\n\t\t}\r\n\t\tthis.currentNode.removeChild(this.currentNode.children[index]);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Adds a child node to the current node, you can specify a position.\r\n\t * \r\n\t * @param {KNode}  node  a node to add, if omitted a new node will be created.\r\n\t * @param {number} index - position of node (0 means first position), if omitted the node will be added as last child of current node.\r\n\t */\r\n\taddNode(node, index) {\r\n\t\tif(typeof node == \"number\") {\r\n\t\t\tindex = node;\r\n\t\t\tnode = new KNode();\r\n\t\t}\r\n\t\tif(node == null) {\r\n\t\t\tnode = new KNode();\r\n\t\t}\r\n\t\t\r\n\t\tif(index == null || index >= this.currentNode.children.length) {\r\n\t\t\tthis.currentNode.appendChild(node);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// find last node of branch\r\n\t\t\tvar lastNode = node;\r\n\t\t\twhile(lastNode.children[0]) {\r\n\t\t\t\tlastNode = lastNode.children[0];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// replace nodes\r\n\t\t\tlastNode.appendChild(this.currentNode.children[index]);\r\n\t\t\tthis.currentNode.children.splice(index, 0, node);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes current's node child and all its descendants.\r\n\t * \r\n\t * @param {number} index of child node\r\n\t */\r\n\tremoveNode(index) {\r\n\t\tif(index == null) {\r\n\t\t\tindex = this.currentNode.children.length - 1;\r\n\t\t}\r\n\t\t\r\n\t\tvar removedNode = this.currentNode.children[index];\r\n\t\tthis.currentNode.removeChild(removedNode);\t\t\r\n\t\tthis.currentNode.children.splice(index, 0, ...removedNode.children);\r\n\t}\r\n\t\r\n\t/* ======= NODE PROPERTIES ==================================================================== */\r\n\t\r\n\t/**\r\n\t * Gets move associated to the current node.\r\n\t * \r\n\t * @returns {Object} move object\r\n\t */\r\n\tgetMove() {\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets (or removes) move directly to the current node.\r\n\t * \r\n\t * @param {Object} [move] object, if omitted, move will be removed from the node.\r\n\t */\r\n\tsetMove(move) {\r\n\t\t\r\n\t}\r\n\t\r\n\tgetTurn() {\r\n\t\r\n\t}\r\n\t\r\n\tsetTurn(turn) {\r\n\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets markup on given coordination (as markup object). If coordinates are omitted, you will get all markup in array.\r\n\t * \r\n\t * @param {number}                      x coordinate\r\n\t * @param {number}                      y coordinate\r\n\t *                                        \r\n\t * @returns {(BoardObject[]|BoardObject)} Markup object or array of markup objects                  \r\n\t */\r\n\tgetMarkup(x, y) {\r\n\t\tif(arguments.length == 2) {\r\n\t\t\tfor(let propIdent in this.currentNode.SGFProperties) {\r\n\t\t\t\tif(markupProperties.indexOf(propIdent) >= 0 && this.currentNode.SGFProperties[propIdent].some(markup => markup.x === x && markup.y === y)) {\r\n\t\t\t\t\treturn {x: x, y: y, type: propIdent};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet markup = [];\r\n\t\t\tfor(let propIdent in this.currentNode.SGFProperties) {\r\n\t\t\t\tif(markupProperties.indexOf(propIdent) >= 0) {\r\n\t\t\t\t\tmarkup = markup.concat(this.currentNode.SGFProperties[propIdent].map(markup => ({x: markup.x, y: markup.y, type: propIdent})));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn markup;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Adds markup into the kifu. If there is already markup on the given coordinates, markup won't be added.\r\n\t * \r\n\t * @param {(BoardObject|BoardObject[]|number)} markupOrX Markup object or array of markup object or x coordinate.\r\n\t * @param {number}                             y         Y coordinate if first argument is coordinate.\r\n\t * @param {string}                             type      Type of markup (if first 2 arguments are coordinates).\r\n\t *                                                       \r\n\t * @returns {boolean}                                    if operation is successfull (markup is added).\r\n\t */\r\n\taddMarkup(x, y, type) {\r\n\t\tif(typeof x == \"object\") {\r\n\t\t\ttype = x.type;\r\n\t\t\ty = x.y;\r\n\t\t\tx = x.x;\r\n\t\t}\r\n\t\tif(this.getMarkup(x, y)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tlet markup = this.currentNode.getProperty(type) || [];\r\n\t\tmarkup.push({x, y});\r\n\t\tthis.currentNode.setProperty(type, markup);\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t/**\r\n\t * The same as addMarkup, but markers can be overridden\r\n\t * @param {[[Type]]} markupOrX [[Description]]\r\n\t * @param {[[Type]]} x         [[Description]]\r\n\t * @param {[[Type]]} type      [[Description]]\r\n\t */\r\n\tsetMarkup(x, y, type) {\r\n\t\tif(typeof x == \"object\") {\r\n\t\t\ttype = x.type;\r\n\t\t\ty = x.y;\r\n\t\t\tx = x.x;\r\n\t\t}\r\n\t\t\r\n\t\tthis.removeMarkup(x, y);\r\n\t\t\r\n\t\tlet markup = this.currentNode.getProperty(type) || [];\r\n\t\tmarkup.push({x, y});\r\n\t\tthis.currentNode.setProperty(type, markup);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes given markup or markup on coordinates.\r\n\t * \r\n\t * @param {[[Type]]} markupOrX [[Description]]\r\n\t * @param {[[Type]]} y         [[Description]]\r\n\t */\r\n\tremoveMarkup(x, y) {\r\n\t\tif(typeof x == \"object\") {\r\n\t\t\ty = x.y;\r\n\t\t\tx = x.x;\r\n\t\t}\r\n\t\t\r\n\t\tfor(let propIdent in this.currentNode.SGFProperties) {\r\n\t\t\tif(markupProperties.indexOf(propIdent) >= 0) {\r\n\t\t\t\tthis.currentNode.setProperty(propIdent, this.currentNode.SGFProperties[propIdent].filter(markup => markup.x !== x || markup.y !== y));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetSetup(x, y) {\r\n\t\tif(arguments.length == 2) {\r\n\t\t\tfor(let propIdent in this.currentNode.SGFProperties) {\r\n\t\t\t\tif(setupProperties[propIdent] != null && this.currentNode.SGFProperties[propIdent].some(setup => setup.x === x && setup.y === y)) {\r\n\t\t\t\t\treturn {x: x, y: y, c: setupProperties[propIdent]};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet setup = [];\r\n\t\t\tfor(let propIdent in this.currentNode.SGFProperties) {\r\n\t\t\t\tif(setupProperties[propIdent] != null) {\r\n\t\t\t\t\tsetup = setup.concat(this.currentNode.SGFProperties[propIdent].map(setup => ({x: setup.x, y: setup.y, c: setupProperties[propIdent]})));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn setup;\r\n\t\t}\r\n\t}\r\n\t\r\n\taddSetup(x, y, color) {\r\n\t\tif(typeof x == \"object\") {\r\n\t\t\tcolor = x.c;\r\n\t\t\ty = x.y;\r\n\t\t\tx = x.x;\r\n\t\t}\r\n\t\tif(this.getSetup(x, y)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tlet setup = this.currentNode.getProperty(setupPropertiesReversed[color]) || [];\r\n\t\tsetup.push({x, y});\r\n\t\tthis.currentNode.setProperty(setupPropertiesReversed[color], setup);\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tsetSetup(x, y, color) {\r\n\t\tif(typeof x == \"object\") {\r\n\t\t\tcolor = x.c;\r\n\t\t\ty = x.y;\r\n\t\t\tx = x.x;\r\n\t\t}\r\n\t\t\r\n\t\tfor(let propIdent in this.currentNode.SGFProperties) {\r\n\t\t\tif(setupProperties[propIdent] != null) {\r\n\t\t\t\tthis.currentNode.setProperty(propIdent, this.currentNode.SGFProperties[propIdent].filter(setup => setup.x !== x || setup.y !== y));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\r\n\t\tlet setup = this.currentNode.getProperty(setupPropertiesReversed[color]) || [];\r\n\t\tsetup.push({x, y});\r\n\t\tthis.currentNode.setProperty(setupPropertiesReversed[color], setup);\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t//removeSetup(x, y) {\r\n\t//\r\n\t//}\r\n\t\r\n\tgetNodeInfo(property) {\r\n\t\r\n\t}\r\n\t\r\n\tsetNodeInfo(property, value) {\r\n\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Plays a move (in correct color). It creates a new node and perform next method.\r\n\t * \r\n\t * @param {Object}  move              coordinates\r\n\t * @param {boolean} [newVariant=true] if false, following nodes will be appended to the new node, instead of creating a new branch (default true)\r\n\t */\r\n\tplay(move, newVariant) {\r\n\t\tvar node = new KNode();\r\n\t\tvar ind;\r\n\t\tnode.setMove(Object.assign(move, {c: this.game.turn}));\r\n\t\t\r\n\t\tif(newVariant === false && this.node.children[0]) {\r\n\t\t\tthis.node.insertBefore(node, this.node.children[0]);\r\n\t\t\tind = 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind = this.node.appendChild(node);\r\n\t\t}\r\n\t\t\r\n\t\tthis.next(ind);\r\n\t}\r\n\t\r\n\tfirst() {\r\n\t\r\n\t}\r\n\t\r\n\tprevious() {\r\n\t\r\n\t}\r\n\t\r\n\tnext(ind) {\r\n\t\r\n\t}\r\n\t\r\n\tlast() {\r\n\t\r\n\t}\r\n\t\r\n\tgoTo(kifuPath) {\r\n\t\r\n\t}\r\n\t\r\n}\r\n","// WGo module\r\n\r\nimport Game from \"./Game\";\r\nimport Position from \"./Game\";\r\nimport SGFParser, {SGFSyntaxError} from \"./kifu/SGFParser\";\r\nimport KNode from \"./kifu/KNode\";\r\nimport CanvasBoard from \"./CanvasBoard\";\r\nimport Kifu from \"./kifu/Kifu\";\r\n\r\n/*WGo.Game = Game;\r\nWGo.Position = Position;\r\nWGo.SGFParser = SGFParser;\r\nWGo.KNode = KNode;*/\r\n//WGo.CanvasBoard = CanvasBoard;\r\n\r\nSGFParser.SGFSyntaxError = SGFSyntaxError;\r\n\r\nexport * from \"./core\";\r\nexport {Game, Position, SGFParser, KNode, CanvasBoard, Kifu};\r\n"],"names":["apply","identity","require$$0","overRest","constant","freeGlobal","global","root","Symbol","objectProto","hasOwnProperty","symToStringTag","getRawTag","nativeObjectToString","objectToString","require$$1","require$$2","baseGetTag","isObject","isFunction","coreJsData","isMasked","funcProto","funcToString","toSource","require$$3","baseIsNative","getValue","getNative","defineProperty","baseSetToString","shortOut","setToString","baseRest","listCacheClear","eq","assocIndexOf","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","require$$4","ListCache","stackClear","stackDelete","stackGet","stackHas","Map","nativeCreate","hashClear","hashDelete","hashGet","hashHas","HASH_UNDEFINED","hashSet","Hash","mapCacheClear","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","stackSet","require$$5","Stack","baseAssignValue","assignMergeValue","createBaseFor","baseFor","Uint8Array","cloneArrayBuffer","cloneTypedArray","copyArray","baseCreate","overArg","getPrototype","isPrototype","initCloneObject","isObjectLike","baseIsArguments","isArguments","isArray","isLength","isArrayLike","isArrayLikeObject","isPlainObject","argsTag","funcTag","objectTag","baseIsTypedArray","baseUnary","isTypedArray","assignValue","copyObject","baseTimes","MAX_SAFE_INTEGER","isIndex","isBuffer","arrayLikeKeys","nativeKeysIn","baseKeysIn","keysIn","toPlainObject","require$$6","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","baseMergeDeep","baseMerge","customDefaultsMerge","isIterateeCall","createAssigner","mergeWith","defaultsDeep","rules"],"mappings":"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"}