<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Position.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-custom.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Position.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Contains implementation of go position class.
 * @module Position
 */
 
/**
 * Creates instance of position object.
 *
 * @alias WGo.Position
 * @class `WGo.Position` represents a certain position of the go game. It is composed from a grid containing black and white stones, capture counts, and actual turn.
 *
 * @param {number} [size = 19] - Size of the board.
 */

var Position = function(size) {
	/** 
	 * @property {number} size Size of the board.
	 * @constant 
	 */
	 
	this.size = size || 19;
	
	/** @property {Array.&lt;Array.&lt;(WGo.B|WGo.W|WGo.E)>>} grid - Two dimensional array containing stones of the position. */
	this.grid = [];
	for(var i = 0; i &lt; this.size*this.size; i++) {
		this.grid[i] = 0;
	}
	
	/** @property {{black: number, white: number}} capCount - Contains numbers of stones that both players captured. */
	this.capCount = {
		black: 0,
		white: 0
	}
	
	/** @property {(WGo.B|WGo.W)} turn - Who plays next move. */
	this.turn = WGo.B;
}

Position.prototype = {
	constructor: Position,
	
	/**
	 * Returns stone on the given field.
	 *
	 * @param {number} x - X coordinate
	 * @param {number} y - Y coordinate
	 * @return {(WGo.B|WGo.W|WGo.E)} Color
	 */

	get: function(x,y) {
		if(x &lt; 0 || y &lt; 0 || x >= this.size || y >= this.size) return undefined;
		return this.grid[x*this.size+y];
	},

	/**
	 * Sets stone on the given field.
	 *
	 * @param {number} x - X coordinate
	 * @param {number} y - Y coordinate
	 * @param {(WGo.B|WGo.W|WGo.E)} c - Color
	 */

	set: function(x,y,c) {
		this.grid[x*this.size+y] = c;
		return this;
	},

	/**
	 * Clears the whole position (every value is set to 0).
	 */

	clear: function() {
		for(var i = 0; i &lt; this.size*this.size; i++) this.grid[i] = 0;
		return this;
	},

	/**
	 * Clones the whole position.
	 * 
	 * @return {WGo.Position} Copy of the position.
	 * @todo Clone turn as well.
	 */

	clone: function() {
		var clone = new Position(this.size);
		clone.grid = this.grid.slice(0);
		clone.capCount.black = this.capCount.black;
		clone.capCount.black = this.capCount.black;
		return clone;
	},
	
	/**
	 * Compares this position with another position and return object with changes
	 *
	 * @param {WGo.Position} position - Position to compare to.
	 * @return {ChangeObject} Change object
	 */
	
	compare: function(position) {
		var add = [], remove = [];
		
		for(var i = 0; i &lt; this.size*this.size; i++) {
			if(this.grid[i] &amp;&amp; !position.grid[i]) remove.push({
				x: Math.floor(i/this.size),
				y: i%this.size
			});
			else if(this.grid[i] != position.grid[i]) add.push({
				x: Math.floor(i/this.size),
				y: i%this.size,
				c: position.grid[i]
			});
		}
		
		return {
			add: add,
			remove: remove
		}
	}
}

module.exports = Position;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-CanvasBoard.html">CanvasBoard</a></li><li><a href="module-Position.html">Position</a></li></ul><h3>Classes</h3><ul><li><a href="Game.html">Game</a></li><li><a href="WGo.CanvasBoard.html">CanvasBoard</a></li><li><a href="WGo.CanvasBoard.CanvasLayer.html">CanvasLayer</a></li><li><a href="WGo.CanvasBoard.GridLayer.html">GridLayer</a></li><li><a href="WGo.CanvasBoard.MultipleCanvasLayer.html">MultipleCanvasLayer</a></li><li><a href="WGo.CanvasBoard.ShadowLayer.html">ShadowLayer</a></li><li><a href="WGo.Position.html">Position</a></li></ul><h3>Namespaces</h3><ul><li><a href="WGo.html">WGo</a></li></ul><h3>Interfaces</h3><ul><li><a href="Board.html">Board</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Sun Oct 04 2015 15:17:02 GMT+0200 (Střední Evropa (letní čas))
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
